<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>functional programming &#8212; PowrUsr Docs alpha documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?v=aa5eeaf2" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css?v=b20cc3f5" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c6eb1e0f" />
    
    <script src="../_static/documentation_options.js?v=1f169f65"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="fundamentals" href="fundamentals.html" />
    <link rel="prev" title="glob" href="file_ops.html" /><link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 
  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Quick search" aria-label="Quick search" type="search" name="q" />
                <input type="submit" value="Go"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">main</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../sphinx.html">sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash/index.html">bash</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="assert.html">assert python</a></li>
<li class="toctree-l2"><a class="reference internal" href="asyncio.html">asyncio</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html">itertools</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#collections">collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataclass.html">dataclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="designpatterns.html">design patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_ops.html">glob</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">functional programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamentals.html">fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="generator.html">generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="pandas.html">pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="regex.html">regex</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">code library</a></li>
</ul>
</li>
</ul>

  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">functional programming</a><ul>
<li><a class="reference internal" href="#pure-function">pure function</a></li>
<li><a class="reference internal" href="#higher-order">higher order</a></li>
<li><a class="reference internal" href="#lazy-vs-eager-evaluation">lazy vs eager evaluation</a></li>
<li><a class="reference internal" href="#immutability">immutability</a></li>
<li><a class="reference internal" href="#lambda">lambda</a></li>
<li><a class="reference internal" href="#map">map</a></li>
<li><a class="reference internal" href="#zip">zip</a><ul>
<li><a class="reference internal" href="#strict-mode">strict mode</a></li>
<li><a class="reference internal" href="#using">using *</a></li>
<li><a class="reference internal" href="#build-dict">build dict</a></li>
<li><a class="reference internal" href="#functional-pipelining">functional pipelining</a></li>
<li><a class="reference internal" href="#challenge">challenge</a></li>
</ul>
</li>
<li><a class="reference internal" href="#filter">filter</a><ul>
<li><a class="reference internal" href="#multiple-conditions">multiple conditions</a></li>
<li><a class="reference internal" href="#with-nested-lambdas">with nested lambdas</a></li>
<li><a class="reference internal" href="#chained-filtering">chained filtering</a></li>
<li><a class="reference internal" href="#exercise">exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-vs-comprehensions-gen-expression">map vs comprehensions &amp; gen expression</a></li>
<li><a class="reference internal" href="#any-all">any all</a><ul>
<li><a class="reference internal" href="#filter-and-map">filter and map</a></li>
<li><a class="reference internal" href="#negation">negation</a></li>
<li><a class="reference internal" href="#short-circuiting">short-circuiting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#comprehensions">comprehensions</a><ul>
<li><a class="reference internal" href="#multiple-iterables">multiple iterables</a></li>
<li><a class="reference internal" href="#id1">exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-comprehensions">set comprehensions</a><ul>
<li><a class="reference internal" href="#punctuation">punctuation</a></li>
<li><a class="reference internal" href="#primes">primes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dictionary-comprehensions">dictionary comprehensions</a><ul>
<li><a class="reference internal" href="#id2">exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iterator">iterator</a><ul>
<li><a class="reference internal" href="#iterator-protocol">iterator protocol</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generator">generator</a><ul>
<li><a class="reference internal" href="#generator-expressions">generator expressions</a></li>
<li><a class="reference internal" href="#way-communication">2-way communication</a></li>
<li><a class="reference internal" href="#id3">exercise</a></li>
<li><a class="reference internal" href="#data-pipelining">data pipelining</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recursion">recursion</a><ul>
<li><a class="reference internal" href="#recursion-trees-recurrence-relations">recursion trees &amp; recurrence relations</a></li>
<li><a class="reference internal" href="#tail-recursion-recursion-limits">tail recursion &amp; recursion limits</a></li>
<li><a class="reference internal" href="#mutual-recursion">mutual recursion</a></li>
<li><a class="reference internal" href="#parsing-structured-data">parsing structured data</a></li>
<li><a class="reference internal" href="#binary-search">binary search</a></li>
<li><a class="reference internal" href="#refactored-signature">refactored signature</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functools">functools</a><ul>
<li><a class="reference internal" href="#reduce">reduce</a></li>
<li><a class="reference internal" href="#wraps">wraps</a></li>
<li><a class="reference internal" href="#lru-cache">lru_cache</a></li>
</ul>
</li>
<li><a class="reference internal" href="#closures">closures</a><ul>
<li><a class="reference internal" href="#invoke-outside-scope">invoke outside scope</a></li>
<li><a class="reference internal" href="#using-lambdas">using lambdas</a></li>
</ul>
</li>
<li><a class="reference internal" href="#decorators">decorators</a><ul>
<li><a class="reference internal" href="#timer">timer</a></li>
<li><a class="reference internal" href="#backoff">backoff</a></li>
<li><a class="reference internal" href="#advanced-decorators">advanced decorators</a></li>
<li><a class="reference internal" href="#chaining-decorators">chaining decorators</a></li>
<li><a class="reference internal" href="#wraps-preserve-id">wraps, preserve id</a></li>
<li><a class="reference internal" href="#practice">practice</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </nav>
    </div>
</div>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fundamentals.html" title="fundamentals"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="file_ops.html" title="glob"
             accesskey="P">previous</a> |</li>
          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
              <a href="../index.html">PowrUsr Docs alpha documentation</a> &#187;
              
          </li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">functional programming</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="functional-programming">
<h1>functional programming<a class="headerlink" href="#functional-programming" title="Link to this heading">¶</a></h1>
<section id="pure-function">
<h2>pure function<a class="headerlink" href="#pure-function" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Pure functions have no side effects, and return a value that depends only on their arguments</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pure_function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">y</span>
    <span class="k">return</span> <span class="n">temp</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>

<span class="c1"># pure</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="c1"># impure</span>
<span class="n">some_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">impure</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="n">some_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p>Pure functions are:</p>
<ul class="simple">
<li><p>easier to reason about and test.</p></li>
<li><p>more efficient. Once the function has been evaluated for an input, the result can be stored and referred to the next time the function of that input is needed, reducing the number of times the function is called. This is called memoization.</p></li>
<li><p>easier to run in parallel.</p></li>
<li><p>complicate the otherwise simple task of I/O, more difficult to write</p></li>
</ul>
</section>
<section id="higher-order">
<h2>higher order<a class="headerlink" href="#higher-order" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Higher-order functions take other functions as arguments, or return them as results</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">unstable_function</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulates an unstable function that fails 50% of the time.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Function failed!&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transient error!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Function succeeded!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Success!&quot;</span>


<span class="k">def</span> <span class="nf">retry</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">continue</span>
        
    <span class="k">return</span> <span class="s2">&quot;Failed after max retries&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">retry</span><span class="p">(</span><span class="n">unstable_function</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Function failed!</span>
<span class="go">Function failed!</span>
<span class="go">Function failed!</span>
<span class="go">Function failed!</span>
<span class="go">Function failed!</span>
<span class="go">Function succeeded!</span>
</pre></div>
</div>
</section>
<section id="lazy-vs-eager-evaluation">
<h2>lazy vs eager evaluation<a class="headerlink" href="#lazy-vs-eager-evaluation" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eager_squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">eager_squares</span><span class="p">)</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>

<span class="n">lazy_squares</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lazy_squares</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="o">&lt;</span><span class="n">genexpr</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x106110c10</span><span class="o">&gt;</span>

<span class="nb">next</span><span class="p">(</span><span class="n">lazy_squares</span><span class="p">)</span>
<span class="mi">0</span>
<span class="nb">next</span><span class="p">(</span><span class="n">lazy_squares</span><span class="p">)</span>
<span class="mi">1</span>
</pre></div>
</div>
<p>Haskell -&gt; all functions are lazy by default
Python -&gt; functions could be lazy but we need to be more deliberate in their implementation</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eager_squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">lazy_squares</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">lazy_evens</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>

<span class="n">gen_func</span> <span class="o">=</span> <span class="n">lazy_evens</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="nb">next</span><span class="p">(</span><span class="n">gen_func</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen_func</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen_func</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Chaining Lazy Operations</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">lazy_squares</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">squared_evens</span> <span class="o">=</span> <span class="n">lazy_squares</span><span class="p">(</span><span class="n">lazy_evens</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="nb">next</span><span class="p">(</span><span class="n">squared_evens</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">squared_evens</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">squared_evens</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="immutability">
<h2>immutability<a class="headerlink" href="#immutability" title="Link to this heading">¶</a></h2>
<p>wrong:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="k">def</span> <span class="nf">increment_elements</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
        <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">data</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">incremented_numbers</span> <span class="o">=</span> <span class="n">increment_elements</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">incremented_numbers</span><span class="p">)</span>  <span class="c1"># [4, 5, 6]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="c1"># [4, 5, 6] OOPS! </span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>good:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="k">def</span> <span class="nf">increment_elements</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="c1"># for i in range(len(data)):</span>
    <span class="c1">#     data[i] += value</span>
    <span class="c1"># return data</span>
    
    <span class="k">return</span> <span class="p">[</span><span class="n">item</span> <span class="o">+</span> <span class="n">value</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">incremented_numbers</span> <span class="o">=</span> <span class="n">increment_elements</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">incremented_numbers</span><span class="p">)</span>  <span class="c1"># [4, 5, 6]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>list comprehensions always create a new object, thus ensuring immutability</p></li>
</ul>
<p>undo/redo operations with immutable data</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">history</span> <span class="o">=</span> <span class="n">create_history</span><span class="p">()</span> <span class="c1"># create a new history object</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">edit</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">)</span> <span class="c1"># add a new edit to the history</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">edit</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="s2">&quot;Hello, World&quot;</span><span class="p">)</span> <span class="c1"># add another edit to the history</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">undo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span> <span class="c1"># undo the last edit resulting history: &quot;Hello&quot;</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">redo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span> <span class="c1"># redo the last edit resulting history: &quot;Hello, World&quot;</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">undo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span> <span class="c1"># undo the last edit resulting history: &quot;Hello&quot;</span>

<span class="k">def</span> <span class="nf">create_history</span><span class="p">():</span>
    <span class="c1"># states = [&quot;&quot;, &quot;Hello&quot;, &quot;Hello, World&quot;]</span>
    <span class="c1"># current_index = 1    </span>
    
    <span class="k">return</span> <span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="n">new_text</span><span class="p">):</span>
    <span class="n">states</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">=</span> <span class="n">history</span>
    <span class="n">new_states</span> <span class="o">=</span> <span class="n">states</span><span class="p">[:</span><span class="n">current_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">new_text</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">new_states</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>  

<span class="k">def</span> <span class="nf">undo</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
    <span class="n">states</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">=</span> <span class="n">history</span>
    <span class="n">new_index</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">states</span><span class="p">,</span> <span class="n">new_index</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">redo</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
    <span class="n">states</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">=</span> <span class="n">history</span>
    <span class="n">new_index</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">states</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">states</span><span class="p">,</span> <span class="n">new_index</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">current_state</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
    <span class="n">states</span><span class="p">,</span> <span class="n">current_index</span> <span class="o">=</span> <span class="n">history</span>    
    <span class="k">return</span> <span class="n">states</span><span class="p">[</span><span class="n">current_index</span><span class="p">]</span>

<span class="n">history</span> <span class="o">=</span> <span class="n">create_history</span><span class="p">()</span>

<span class="n">history</span> <span class="o">=</span> <span class="n">edit</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="s2">&quot;Duke&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">(</span><span class="n">history</span><span class="p">))</span>
<span class="n">Duke</span>


<span class="n">history</span> <span class="o">=</span> <span class="n">edit</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="s2">&quot;Duke Nukem&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">(</span><span class="n">history</span><span class="p">))</span>
<span class="n">Duke</span> <span class="n">Nukem</span>


<span class="n">history</span> <span class="o">=</span> <span class="n">undo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">(</span><span class="n">history</span><span class="p">))</span>
<span class="n">Duke</span>


<span class="n">history</span> <span class="o">=</span> <span class="n">redo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">(</span><span class="n">history</span><span class="p">))</span>
<span class="n">Duke</span> <span class="n">Nukem</span>


<span class="n">history</span> <span class="o">=</span> <span class="n">undo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">undo</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">(</span><span class="n">history</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="lambda">
<h2>lambda<a class="headerlink" href="#lambda" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="n">num</span> <span class="o">*</span> <span class="n">num</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.&lt;</span><span class="k">lambda</span><span class="o">&gt;</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">&gt;</span>

<span class="c1"># how about a list of nums?</span>

<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">num</span><span class="o">*</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">]</span>

<span class="k">lambda</span> <span class="n">num_list</span><span class="p">:</span> <span class="p">[</span><span class="n">num</span><span class="o">*</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.&lt;</span><span class="k">lambda</span><span class="o">&gt;</span><span class="p">(</span><span class="n">num_list</span><span class="p">)</span><span class="o">&gt;</span>

<span class="c1"># if even, then square, if odd then cube? get me the sum of all these.</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">n</span><span class="o">**</span><span class="mi">3</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">])</span>

<span class="k">lambda</span> <span class="n">num_list</span><span class="p">:</span> <span class="nb">sum</span><span class="p">([</span><span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">n</span><span class="o">**</span><span class="mi">3</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">])</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.&lt;</span><span class="k">lambda</span><span class="o">&gt;</span><span class="p">(</span><span class="n">num_list</span><span class="p">)</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>good &amp; bad use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sum_squares_or_cubes</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">n</span><span class="o">**</span><span class="mi">3</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">complex_operation</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Initialize product result</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">*=</span> <span class="n">num</span><span class="o">**</span><span class="mi">2</span>  <span class="c1"># Square if even</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">*=</span> <span class="n">num</span><span class="o">**</span><span class="mi">3</span>  <span class="c1"># Cube if odd</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="n">complex_opeartion_lambda</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">nl</span><span class="p">:</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="n">acc</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">if</span> <span class="n">n</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="n">n</span><span class="o">**</span><span class="mi">3</span><span class="p">),</span> <span class="n">nl</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">complex_opeartion</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="mi">216000</span>

<span class="n">complex_opeartion_lambda</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="mi">216000</span>
</pre></div>
</div>
<p>Nesting And In-Place Lambdas</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.&lt;</span><span class="k">lambda</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;</span>

<span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())(</span><span class="s2">&quot;hey there&quot;</span><span class="p">)</span>
<span class="s1">&#39;Hey there&#39;</span>

<span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;even&quot;</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;odd&quot;</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span>
<span class="s1">&#39;even&#39;</span>

<span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;even&quot;</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;odd&quot;</span><span class="p">)(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())(</span><span class="mi">4</span><span class="p">)</span>
<span class="s1">&#39;Even&#39;</span>
</pre></div>
</div>
<p>challenge</p>
<ul class="simple">
<li><p>ternary(5)  # Output: ‘positive’</p></li>
<li><p>ternary(-5)  # Output: ‘negative’</p></li>
<li><p>ternary(0)  # Output: ‘zero’</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># a if condition (is true) else ( insert other ternary here ) </span>

<span class="n">ternary</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;positive&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;negative&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;zero&#39;</span>

<span class="n">ternary</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># Output: &#39;positive&#39;</span>
<span class="s1">&#39;positive&#39;</span>

<span class="n">ternary</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># Output: &#39;negative&#39;</span>
<span class="s1">&#39;negative&#39;</span>

<span class="n">ternary</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Output: &#39;zero&#39;</span>
<span class="s1">&#39;zero&#39;</span>
</pre></div>
</div>
</section>
<section id="map">
<h2>map<a class="headerlink" href="#map" title="Link to this heading">¶</a></h2>
<p>Transform Iterables</p>
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#map">map docs</a></p>
<ul class="simple">
<li><p>apply <em>function</em> to every item of <em>iterable</em> creating a new iterable
<code class="docutils literal notranslate"><span class="pre">new_iterable</span> <span class="pre">=</span> <span class="pre">map(function,</span> <span class="pre">iterable)</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">number</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">squared</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">squared</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>

<span class="o">--</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">abs_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
<span class="n">abs_values</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>


<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
<span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Welcome&quot;</span><span class="p">,</span> <span class="s2">&quot;to&quot;</span><span class="p">,</span> <span class="s2">&quot;Real&quot;</span><span class="p">,</span> <span class="s2">&quot;Python&quot;</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">words</span><span class="p">))</span>
<span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">first_it</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">second_it</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">pow</span><span class="p">,</span> <span class="n">first_it</span><span class="p">,</span> <span class="n">second_it</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">729</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]))</span>
<span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">string_it</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;processing&quot;</span><span class="p">,</span> <span class="s2">&quot;strings&quot;</span><span class="p">,</span> <span class="s2">&quot;with&quot;</span><span class="p">,</span> <span class="s2">&quot;map&quot;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">capitalize</span><span class="p">,</span> <span class="n">string_it</span><span class="p">))</span>
<span class="p">[</span><span class="s1">&#39;Processing&#39;</span><span class="p">,</span> <span class="s1">&#39;Strings&#39;</span><span class="p">,</span> <span class="s1">&#39;With&#39;</span><span class="p">,</span> <span class="s1">&#39;Map&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">with_spaces</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;processing &quot;</span><span class="p">,</span> <span class="s2">&quot;  strings&quot;</span><span class="p">,</span> <span class="s2">&quot;with   &quot;</span><span class="p">,</span> <span class="s2">&quot; map   &quot;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">,</span> <span class="n">with_spaces</span><span class="p">))</span>
<span class="p">[</span><span class="s1">&#39;processing&#39;</span><span class="p">,</span> <span class="s1">&#39;strings&#39;</span><span class="p">,</span> <span class="s1">&#39;with&#39;</span><span class="p">,</span> <span class="s1">&#39;map&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">with_dots</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;processing..&quot;</span><span class="p">,</span> <span class="s2">&quot;...strings&quot;</span><span class="p">,</span> <span class="s2">&quot;with....&quot;</span><span class="p">,</span> <span class="s2">&quot;..map..&quot;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="n">with_dots</span><span class="p">))</span>
<span class="p">[</span><span class="s1">&#39;processing&#39;</span><span class="p">,</span> <span class="s1">&#39;strings&#39;</span><span class="p">,</span> <span class="s1">&#39;with&#39;</span><span class="p">,</span> <span class="s1">&#39;map&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">math</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">720</span><span class="p">,</span> <span class="mi">5040</span><span class="p">]</span>

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_five</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">5</span>

<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">add_five</span><span class="p">,</span> <span class="n">nums</span><span class="p">))</span> <span class="c1"># map(function, iterable)</span>
<span class="c1"># [16, 27, 38, 49, 60]</span>

<span class="c1"># using lambda:</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span> <span class="n">nums</span><span class="p">))</span> <span class="c1"># [16, 27, 38, 49, 60]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span>

<span class="n">cubed</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">cubed</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span>

<span class="n">cubed</span>
<span class="o">&lt;</span><span class="nb">map</span> <span class="n">at</span> <span class="mh">0x1044c0be0</span><span class="o">&gt;</span>

<span class="n">cubed</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">cubed</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;how&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">,</span> <span class="s1">&#39;you&#39;</span><span class="p">)</span>
<span class="n">capitalized</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="n">words</span><span class="p">)</span>

<span class="nb">tuple</span><span class="p">(</span><span class="n">capitalized</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="s1">&#39;How&#39;</span><span class="p">,</span> <span class="s1">&#39;Are&#39;</span><span class="p">,</span> <span class="s1">&#39;You&#39;</span><span class="p">)</span>

<span class="n">floats</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">}</span>

<span class="n">rounded</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">floats</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="n">rounded</span><span class="p">)</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</pre></div>
</div>
<p>Mapping Over Multiple Iterables</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">first_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alice&#39;</span><span class="p">,</span> <span class="s1">&#39;bob&#39;</span><span class="p">,</span> <span class="s1">&#39;charlie&#39;</span><span class="p">]</span>
<span class="n">last_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;smith&#39;</span><span class="p">,</span> <span class="s1">&#39;jones&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">]</span>

<span class="n">full_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="n">first_names</span><span class="p">,</span> <span class="n">last_names</span><span class="p">))</span>

<span class="n">full_names</span>
<span class="p">[</span><span class="s1">&#39;Alice Smith&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob Jones&#39;</span><span class="p">,</span> <span class="s1">&#39;Charlie Brown&#39;</span><span class="p">]</span>

<span class="n">middle_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;jane&#39;</span><span class="p">,</span> <span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="s1">&#39;james&#39;</span><span class="p">]</span>

<span class="n">full_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">z</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="n">first_names</span><span class="p">,</span> <span class="n">middle_names</span><span class="p">,</span> <span class="n">last_names</span><span class="p">))</span>

<span class="n">full_names</span>
<span class="p">[</span><span class="s1">&#39;Alice Jane Smith&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob John Jones&#39;</span><span class="p">,</span> <span class="s1">&#39;Charlie James Brown&#39;</span><span class="p">]</span>

<span class="n">full_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">y</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">z</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="n">first_names</span><span class="p">,</span> <span class="n">middle_names</span><span class="p">,</span> <span class="n">last_names</span><span class="p">))</span>

<span class="n">full_names</span>
<span class="p">[</span><span class="s1">&#39;Alice Jane Smith&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob John Jones&#39;</span><span class="p">,</span> <span class="s1">&#39;Charlie James Brown&#39;</span><span class="p">]</span>
<span class="n">Built</span><span class="o">-</span><span class="n">Ins</span>

<span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;hamming&quot;</span>

<span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
<span class="mi">7</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hamming&quot;</span><span class="p">,</span> <span class="s2">&quot;von neumann&quot;</span><span class="p">,</span> <span class="s2">&quot;turing&quot;</span><span class="p">,</span> <span class="s2">&quot;knuth&quot;</span><span class="p">]</span>

<span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
<span class="mi">4</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">words</span><span class="p">))</span>
<span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">num_strings</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">]</span>

<span class="c1"># list(map(str, range(1, 6)))</span>
<span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">]</span>

<span class="c1"># cast to ints</span>

<span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">))</span>
<span class="nb">int</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">num_strings</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># add 2 nums?</span>

<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">mul</span>

<span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
</pre></div>
</div>
<p>do this transformation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;abc&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;def&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;ghi&#39;</span><span class="p">:</span> <span class="mi">15</span>
<span class="p">}</span>
<span class="n">Output</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s1">&#39;cba&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="s1">&#39;fed&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s1">&#39;ihg&#39;</span><span class="p">:</span> <span class="mi">25</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;abc&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;def&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;ghi&#39;</span><span class="p">:</span> <span class="mi">15</span>
<span class="p">}</span>

<span class="nb">dict</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">kv</span><span class="p">:</span> <span class="p">(</span><span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">kv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">10</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
<span class="p">{</span><span class="s1">&#39;cba&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;fed&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;ihg&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="zip">
<h2>zip<a class="headerlink" href="#zip" title="Link to this heading">¶</a></h2>
<p>zip creates a generator with tuples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="s1">&#39;Toyota&#39;</span><span class="p">,</span> <span class="s1">&#39;Tesla&#39;</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20000</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="mi">50000</span><span class="p">]</span>

<span class="n">zipped_data</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cars</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span>

<span class="nb">type</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="nb">zip</span>

<span class="nb">next</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="p">[(</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="mi">20000</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Toyota&#39;</span><span class="p">,</span> <span class="mi">30000</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Tesla&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)]</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">]</span>

<span class="n">zipped_data</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cars</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="p">[(</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Toyota&#39;</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Tesla&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<section id="strict-mode">
<h3>strict mode<a class="headerlink" href="#strict-mode" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="s1">&#39;Toyota&#39;</span><span class="p">,</span> <span class="s1">&#39;Tesla&#39;</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20000</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="mi">50000</span><span class="p">]</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">]</span>
<span class="n">zipped_data</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cars</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="p">[(</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Toyota&#39;</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Tesla&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">)]</span>

<span class="n">cars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="s1">&#39;Toyota&#39;</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20000</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="mi">50000</span><span class="p">]</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">]</span>

<span class="n">zipped_data</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cars</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="p">[(</span><span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Chevy&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Toyota&#39;</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">)]</span>

<span class="n">zipped_data</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cars</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">zipped_data</span><span class="p">)</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="nb">zip</span><span class="p">()</span> <span class="n">argument</span> <span class="mi">2</span> <span class="ow">is</span> <span class="n">longer</span> <span class="n">than</span> <span class="n">argument</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="using">
<h3>using *<a class="headerlink" href="#using" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">zipped_data</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">78</span><span class="p">)]</span>

<span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">zipped_data</span><span class="p">:</span>
    <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>

<span class="n">names</span><span class="p">,</span> <span class="n">scores</span>
<span class="p">([</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Charlie&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">85</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">78</span><span class="p">])</span>

<span class="n">names</span><span class="p">,</span> <span class="n">scores</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">zipped_data</span><span class="p">)</span>

<span class="n">names</span><span class="p">,</span> <span class="n">scores</span>
<span class="p">((</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Charlie&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">78</span><span class="p">))</span>

<span class="p">[(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">78</span><span class="p">)]</span>
<span class="p">[(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">78</span><span class="p">)]</span>
<span class="c1"># * -&gt; (&#39;Alice&#39;, 85), (&#39;Bob&#39;, 90), (&#39;Charlie&#39;, 78)</span>

<span class="c1"># zip(iter1, iter2, iter3)</span>

<span class="n">list1</span><span class="p">,</span> <span class="n">list2</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">((</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">78</span><span class="p">))</span>

<span class="n">list1</span>
<span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Charlie&#39;</span><span class="p">)</span>

<span class="n">list2</span>
<span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">78</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="build-dict">
<h3>build dict<a class="headerlink" href="#build-dict" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stock_index</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;s_and_p&quot;</span><span class="p">,</span> <span class="s2">&quot;dow_jones&quot;</span><span class="p">,</span> <span class="s2">&quot;nasdaq&quot;</span><span class="p">]</span>
<span class="n">close_values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2470.30</span><span class="p">,</span> <span class="mf">22000.00</span><span class="p">,</span> <span class="mf">6312.47</span><span class="p">]</span>

<span class="n">index_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">close_value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">stock_index</span><span class="p">,</span> <span class="n">close_values</span><span class="p">):</span>
    <span class="n">index_dict</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">close_value</span>

<span class="n">index_dict</span>
<span class="p">{</span><span class="s1">&#39;s_and_p&#39;</span><span class="p">:</span> <span class="mf">2470.3</span><span class="p">,</span> <span class="s1">&#39;dow_jones&#39;</span><span class="p">:</span> <span class="mf">22000.0</span><span class="p">,</span> <span class="s1">&#39;nasdaq&#39;</span><span class="p">:</span> <span class="mf">6312.47</span><span class="p">}</span>

<span class="p">{</span><span class="n">idx</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">stock_index</span><span class="p">,</span> <span class="n">close_values</span><span class="p">)}</span>
<span class="p">{</span><span class="s1">&#39;s_and_p&#39;</span><span class="p">:</span> <span class="mf">2470.3</span><span class="p">,</span> <span class="s1">&#39;dow_jones&#39;</span><span class="p">:</span> <span class="mf">22000.0</span><span class="p">,</span> <span class="s1">&#39;nasdaq&#39;</span><span class="p">:</span> <span class="mf">6312.47</span><span class="p">}</span>

<span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">stock_index</span><span class="p">,</span> <span class="n">close_values</span><span class="p">))</span>
<span class="p">{</span><span class="s1">&#39;s_and_p&#39;</span><span class="p">:</span> <span class="mf">2470.3</span><span class="p">,</span> <span class="s1">&#39;dow_jones&#39;</span><span class="p">:</span> <span class="mf">22000.0</span><span class="p">,</span> <span class="s1">&#39;nasdaq&#39;</span><span class="p">:</span> <span class="mf">6312.47</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="functional-pipelining">
<h3>functional pipelining<a class="headerlink" href="#functional-pipelining" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># operation 1: double</span>
<span class="c1"># operation 2: square root, rounded to 2 decimals</span>

<span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nb">map</span> <span class="n">at</span> <span class="mh">0x110a7a6e0</span><span class="o">&gt;</span>

<span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nb">map</span> <span class="n">at</span> <span class="mh">0x110a783d0</span><span class="o">&gt;</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">data</span><span class="p">),</span>
    <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.41</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">1.73</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">2.24</span><span class="p">)]</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)(</span><span class="n">x</span><span class="p">),</span>
        <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span>
<span class="p">)</span>

<span class="c1"># next()</span>

<span class="nb">list</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.41</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">1.73</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">2.24</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>

<span class="k">def</span> <span class="nf">square_root</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span>
        <span class="n">double</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
        <span class="n">square_root</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span>
<span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.41</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">1.73</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">2.24</span><span class="p">)]</span>
</pre></div>
</div>
</section>
<section id="challenge">
<h3>challenge<a class="headerlink" href="#challenge" title="Link to this heading">¶</a></h3>
<p>instructions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use strict mode</span>
<span class="n">Input</span> <span class="n">Data</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Shirt&#39;</span><span class="p">,</span> <span class="s1">&#39;Pants&#39;</span><span class="p">,</span> <span class="s1">&#39;Shoes&#39;</span><span class="p">,</span> <span class="s1">&#39;Hat&#39;</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mf">20.00</span><span class="p">,</span> <span class="mf">30.00</span><span class="p">,</span> <span class="mf">50.00</span><span class="p">,</span> <span class="mf">10.00</span><span class="p">]</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">]</span>
<span class="n">discounts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">Target</span> <span class="n">Output</span>
<span class="p">{</span>
    <span class="s1">&#39;Shirt&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">20.00</span><span class="p">,</span>
        <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">18.00</span>
    <span class="p">},</span>
    <span class="s1">&#39;Pants&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">30.00</span><span class="p">,</span>
        <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">30.00</span>
    <span class="p">},</span>
    <span class="s1">&#39;Shoes&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
        <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">40.00</span>
    <span class="p">},</span>
    <span class="s1">&#39;Hat&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">10.00</span><span class="p">,</span>
        <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="s1">&#39;Black&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">9.50</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Shirt&#39;</span><span class="p">,</span> <span class="s1">&#39;Pants&#39;</span><span class="p">,</span> <span class="s1">&#39;Shoes&#39;</span><span class="p">,</span> <span class="s1">&#39;Hat&#39;</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mf">20.00</span><span class="p">,</span> <span class="mf">30.00</span><span class="p">,</span> <span class="mf">50.00</span><span class="p">,</span> <span class="mf">10.00</span><span class="p">]</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">]</span>
<span class="n">discounts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># if not(len(items) == len(prices) == len(colors)...)</span>
    <span class="c1"># raise ValueError</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">product_tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">discounts</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All input lists must have the same length!&quot;</span><span class="p">)</span>

<span class="n">product_tuples</span>
<span class="p">[(</span><span class="s1">&#39;Shirt&#39;</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Pants&#39;</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Shoes&#39;</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Hat&#39;</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>

<span class="n">report</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">item</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="n">price</span><span class="p">,</span>
        <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span>
        <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">discount</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">discount</span> <span class="ow">in</span> <span class="n">product_tuples</span>
<span class="p">}</span>

<span class="n">report</span>
<span class="p">{</span><span class="s1">&#39;Shirt&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span> <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">18.0</span><span class="p">},</span>
 <span class="s1">&#39;Pants&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">,</span>
  <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span>
  <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">},</span>
 <span class="s1">&#39;Shoes&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span> <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">40.0</span><span class="p">},</span>
 <span class="s1">&#39;Hat&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Price&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s1">&#39;Available Colors&#39;</span><span class="p">:</span> <span class="s1">&#39;Black&#39;</span><span class="p">,</span> <span class="s1">&#39;Discounted Price&#39;</span><span class="p">:</span> <span class="mf">9.5</span><span class="p">}}</span>
</pre></div>
</div>
</section>
</section>
<section id="filter">
<h2>filter<a class="headerlink" href="#filter" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>apply boolean function to an iterable to generate a new iterable</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">is_positive</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">sanitized_sqrt</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="n">cleaned_iter</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">is_positive</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">cleaned_iter</span><span class="p">)</span>


<span class="n">sanitized_sqrt</span><span class="p">([</span><span class="mi">25</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="n">nums</span><span class="p">))</span> <span class="c1"># [22, 44]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;cherry&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;eggplant&quot;</span><span class="p">,</span> <span class="s2">&quot;fig&quot;</span><span class="p">,</span> <span class="s2">&quot;grape&quot;</span><span class="p">]</span>

<span class="n">short_words</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">short_words</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;fig&#39;</span><span class="p">,</span> <span class="s1">&#39;grape&#39;</span><span class="p">]</span>
</pre></div>
</div>
<section id="multiple-conditions">
<h3>multiple conditions<a class="headerlink" href="#multiple-conditions" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># even numbers between 1 and 10, inclusive</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

<span class="n">filtered_numbers</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filtered_numbers</span><span class="p">)</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="c1"># even numbers between 1 and 10, inclusive... that are also greater than 5</span>

<span class="n">filtered_numbers</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filtered_numbers</span><span class="p">)</span>
<span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">books</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The Hobbit&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Dune&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Sci-Fi&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.5</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;To Kill a Mockingbird&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Classics&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.9</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Eragon&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The Catcher in the Rye&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Classics&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">3.8</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Mistborn&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.4</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># selection criteria:</span>
<span class="c1"># - genre must be fantasy</span>
<span class="c1"># - rating min 4.5</span>
<span class="c1"># - title must come before letter M</span>

<span class="k">def</span> <span class="nf">is_genre</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">genre</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">genre</span>

<span class="k">def</span> <span class="nf">has_min_rating</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">min_rating</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;rating&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">min_rating</span>

<span class="k">def</span> <span class="nf">is_alpha_before</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">letter</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">letter</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

<span class="nb">list</span><span class="p">(</span>
    <span class="nb">filter</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">book</span><span class="p">:</span>
        <span class="n">is_genre</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">)</span> <span class="ow">and</span>
        <span class="n">has_min_rating</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span> <span class="ow">and</span>
        <span class="n">is_alpha_before</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">books</span><span class="p">)</span>
<span class="p">)</span>
<span class="p">[{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;The Hobbit&#39;</span><span class="p">,</span> <span class="s1">&#39;genre&#39;</span><span class="p">:</span> <span class="s1">&#39;Fantasy&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">}]</span>
</pre></div>
</div>
</section>
<section id="with-nested-lambdas">
<h3>with nested lambdas<a class="headerlink" href="#with-nested-lambdas" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">books</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The Hobbit&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Dune&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Sci-Fi&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.5</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;To Kill a Mockingbird&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Classics&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.9</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Eragon&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The Catcher in the Rye&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Classics&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">3.8</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Mistborn&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.4</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># outer lambda (book)</span>
<span class="c1">#     inner lambda 1 (book, arg1)</span>
<span class="c1">#     inner lambda 2 (book, arg2)</span>
<span class="c1">#     inner lambda 3 (book, arg3)</span>

<span class="nb">list</span><span class="p">(</span>
    <span class="nb">filter</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">book</span><span class="p">:</span>
        <span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">,</span> <span class="n">genre</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">genre</span><span class="p">)(</span><span class="n">book</span><span class="p">,</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">)</span> <span class="ow">and</span>
        <span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">,</span> <span class="n">rating</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;rating&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">rating</span><span class="p">)(</span><span class="n">book</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span> <span class="ow">and</span>
        <span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">,</span> <span class="n">letter</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">letter</span><span class="o">.</span><span class="n">lower</span><span class="p">())(</span><span class="n">book</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">books</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="p">[{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;The Hobbit&#39;</span><span class="p">,</span> <span class="s1">&#39;genre&#39;</span><span class="p">:</span> <span class="s1">&#39;Fantasy&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">}]</span>
<span class="nb">list</span><span class="p">(</span>
    <span class="nb">filter</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">book</span><span class="p">:</span>
        <span class="n">is_genre</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">)</span> <span class="ow">and</span>
        <span class="n">has_min_rating</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span> <span class="ow">and</span>
        <span class="n">is_alpha_before</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">books</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="chained-filtering">
<h3>chained filtering<a class="headerlink" href="#chained-filtering" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">books</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The Hobbit&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Dune&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Sci-Fi&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.5</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;To Kill a Mockingbird&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Classics&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.9</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Eragon&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The Catcher in the Rye&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Classics&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">3.8</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Mistborn&quot;</span><span class="p">,</span> <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">4.4</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># Selection criteria:</span>
<span class="c1">#  - the book must be fantasy</span>
<span class="c1">#  - it must be rated at least 4.5 </span>
<span class="c1">#  - the title must be alphabetically before W</span>

<span class="n">fantasy_books</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="n">books</span><span class="p">)</span>
<span class="n">highly_rated</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;rating&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">4.5</span><span class="p">,</span> <span class="n">books</span><span class="p">)</span>
<span class="n">alpha_filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">books</span><span class="p">)</span>

<span class="c1"># chaining/pipeing</span>

<span class="n">fantasy_books</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Fantasy&quot;</span><span class="p">,</span> <span class="n">books</span><span class="p">)</span>
<span class="n">highly_rated</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;rating&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">4.5</span><span class="p">,</span> <span class="n">fantasy_books</span><span class="p">)</span>
<span class="n">alpha_filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">highly_rated</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">alpha_filtered</span><span class="p">)</span>
<span class="p">[{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;The Hobbit&#39;</span><span class="p">,</span> <span class="s1">&#39;genre&#39;</span><span class="p">:</span> <span class="s1">&#39;Fantasy&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">}]</span>
</pre></div>
</div>
</section>
<section id="exercise">
<h3>exercise<a class="headerlink" href="#exercise" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reference</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">]</span>

<span class="c1"># The function should return: [&#39;b&#39;, &#39;c&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reference</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">]</span>
<span class="c1">#  zip(reference, values) -&gt; (0, &quot;a&quot;), (1, &quot;b&quot;),...</span>

<span class="nb">list</span><span class="p">(</span>
    <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">rv</span><span class="p">:</span> <span class="n">rv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
<span class="p">)</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">v</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">rv</span><span class="p">:</span> <span class="n">rv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
<span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>alternative</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reference</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">v</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">rv</span><span class="p">:</span> <span class="n">rv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">zip</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
<span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">Pair</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;Pair&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">])</span>

<span class="n">pair</span> <span class="o">=</span> <span class="n">Pair</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>

<span class="n">pair</span><span class="o">.</span><span class="n">select</span>
<span class="mi">0</span>

<span class="nb">bool</span><span class="p">(</span><span class="n">pair</span><span class="o">.</span><span class="n">select</span><span class="p">)</span>
<span class="kc">False</span>

<span class="n">pair</span><span class="o">.</span><span class="n">value</span>
<span class="s1">&#39;a&#39;</span>

<span class="n">reference</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">Pair</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">reference</span><span class="p">),</span> <span class="n">values</span><span class="p">))</span>
<span class="p">[</span><span class="n">Pair</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">),</span>
 <span class="n">Pair</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">),</span>
 <span class="n">Pair</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">),</span>
 <span class="n">Pair</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">),</span>
 <span class="n">Pair</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">),</span>
 <span class="n">Pair</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)]</span>

<span class="n">pairs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">Pair</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">reference</span><span class="p">),</span> <span class="n">values</span><span class="p">)</span>

<span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">select</span><span class="p">,</span> <span class="n">pairs</span><span class="p">)]</span>
<span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="map-vs-comprehensions-gen-expression">
<h2>map vs comprehensions &amp; gen expression<a class="headerlink" href="#map-vs-comprehensions-gen-expression" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generating a list with map</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">))</span>

<span class="c1"># Generating a list with a list comprehension</span>
<span class="p">[</span><span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">]</span>

<span class="o">--</span>

<span class="c1"># Transformation function</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">number</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="c1"># Using map()</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">]</span>

<span class="c1"># Using a list comprehension</span>
<span class="p">[</span><span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">]</span>

<span class="o">--</span>

<span class="c1"># Transformation function</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">number</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="c1"># Using map()</span>
<span class="n">map_obj</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="n">map_obj</span>
<span class="o">&lt;</span><span class="nb">map</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f254d180a60</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">map_obj</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">]</span>

<span class="c1"># Using a generator expression</span>
<span class="n">gen_exp</span> <span class="o">=</span> <span class="p">(</span><span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">)</span>
<span class="n">gen_exp</span>
<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="o">&lt;</span><span class="n">genexpr</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x7f254e056890</span><span class="o">&gt;</span>

<span class="nb">list</span><span class="p">(</span><span class="n">gen_exp</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="any-all">
<h2>any all<a class="headerlink" href="#any-all" title="Link to this heading">¶</a></h2>
<section id="filter-and-map">
<h3>filter and map<a class="headerlink" href="#filter-and-map" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>

<span class="c1"># is there a single person who could order a drink?</span>
<span class="c1"># assume drinking age is 21</span>

<span class="nb">any</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">21</span><span class="p">,</span> <span class="n">ages</span><span class="p">))</span>
<span class="kc">True</span>

<span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">21</span><span class="p">,</span> <span class="n">ages</span><span class="p">))</span>
<span class="kc">False</span>

<span class="n">books</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Book A&quot;</span><span class="p">,</span> <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Book B&quot;</span><span class="p">,</span> <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Book C&quot;</span><span class="p">,</span> <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="mi">105</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Book D&quot;</span><span class="p">,</span> <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">filtered_books</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;pages&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="ow">and</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="n">books</span><span class="p">)</span>

<span class="nb">all</span><span class="p">(</span><span class="n">book</span> <span class="ow">in</span> <span class="n">filtered_books</span> <span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">books</span><span class="p">)</span>
<span class="kc">True</span>

<span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">book</span><span class="p">:</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;pages&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="ow">and</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="n">books</span><span class="p">))</span>
<span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="negation">
<h3>negation<a class="headerlink" href="#negation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;Andy&quot;</span><span class="p">,</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Ann&quot;</span><span class="p">,</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">]</span>

<span class="nb">all</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">)</span>
<span class="kc">False</span>

<span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">)</span>
<span class="kc">True</span>

<span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">strings</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;World&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;Python&quot;</span><span class="p">]</span>

<span class="c1"># str.strip() -&gt; &quot; &quot; -&gt; &quot;&quot; -&gt; bool(&quot;&quot;) -&gt; False -&gt; any(False, False...) -&gt; False</span>

<span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="short-circuiting">
<h3>short-circuiting<a class="headerlink" href="#short-circuiting" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="nb">any</span><span class="p">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">)</span>
<span class="kc">True</span>

<span class="k">def</span> <span class="nf">slow_check</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;checking </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span>

<span class="nb">any</span><span class="p">(</span><span class="n">slow_check</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">)</span>
<span class="n">checking</span> <span class="mi">1</span>
<span class="n">checking</span> <span class="mi">10</span>

<span class="kc">True</span>
</pre></div>
</div>
</section>
</section>
<section id="comprehensions">
<h2>comprehensions<a class="headerlink" href="#comprehensions" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">build this matrix</span>

<span class="sd">0 1 2</span>
<span class="sd">0 1 2</span>
<span class="sd">0 1 2</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

<span class="n">matrix</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>

<span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">flat_matrix</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
        <span class="n">flat_matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="n">flat_matrix</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<section id="multiple-iterables">
<h3>multiple iterables<a class="headerlink" href="#multiple-iterables" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># target output: [</span>
<span class="c1">#     [1, 3], [1, 2], [1, 2], [2, 3],...</span>
<span class="c1"># ]</span>

<span class="p">[</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">list1</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">list2</span> <span class="p">]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>

<span class="p">[</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">list1</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">list2</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="p">]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
</pre></div>
</div>
</section>
<section id="id1">
<h3>exercise<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p>Transform this list of customers dictionaries into a list of customer names with active accounts who have spent more than 100.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">customers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;account_status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="s2">&quot;amount_spent&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;account_status&quot;</span><span class="p">:</span> <span class="s2">&quot;inactive&quot;</span><span class="p">,</span> <span class="s2">&quot;amount_spent&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">,</span> <span class="s2">&quot;account_status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="s2">&quot;amount_spent&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Diana&quot;</span><span class="p">,</span> <span class="s2">&quot;account_status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="s2">&quot;amount_spent&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># define the eligibility criteria as a func</span>
<span class="k">def</span> <span class="nf">is_eligible</span><span class="p">(</span><span class="n">customer</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">customer</span><span class="p">[</span><span class="s2">&quot;account_status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;active&quot;</span> <span class="ow">and</span> <span class="n">customer</span><span class="p">[</span><span class="s2">&quot;amount_spent&quot;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">100</span>

<span class="c1"># filter the list using that func</span>
<span class="n">eligible_customers</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">is_eligible</span><span class="p">,</span> <span class="n">customers</span><span class="p">)</span>

<span class="c1"># create the new list from the filtered gen</span>
<span class="n">eligible_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">customer</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">customer</span> <span class="ow">in</span> <span class="n">eligible_customers</span><span class="p">]</span>
<span class="n">eligible_names</span>
<span class="p">[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Diana&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="n">c</span>
<span class="p">[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Diana&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="set-comprehensions">
<h2>set comprehensions<a class="headerlink" href="#set-comprehensions" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># sets vs lists?</span>
    <span class="c1"># sets: UNORDERED collections of UNIQUE elements</span>

<span class="n">set1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="mi">3</span> <span class="ow">in</span> <span class="n">set1</span>
<span class="kc">True</span>

<span class="mi">3</span> <span class="ow">in</span> <span class="n">list1</span>
<span class="kc">True</span>

<span class="n">set1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>

<span class="n">set1</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>

<span class="n">set1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>
<span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="p">{</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">}</span>

<span class="p">{</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">}</span>

<span class="p">{</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>

<span class="c1"># More Advanced Operations</span>

<span class="n">set1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>

<span class="n">set1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>
<span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>

<span class="n">set1</span> <span class="o">&amp;</span> <span class="n">set2</span>
<span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>

<span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">set1</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">set2</span><span class="p">}</span>
<span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">]</span>

<span class="c1"># vowels -&gt; aeiou</span>

<span class="p">{</span><span class="n">letter</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span> <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="s1">&#39;aeiou&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">}</span>
</pre></div>
</div>
<section id="punctuation">
<h3>punctuation<a class="headerlink" href="#punctuation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sentence</span> <span class="o">=</span> <span class="s2">&quot;Hello, World! This is a test. Isn&#39;t it great to explore Python&#39;s capabilities? Yes, indeed!&quot;</span>

<span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">punctuation</span>

<span class="nb">print</span><span class="p">(</span><span class="n">punctuation</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;!&quot;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~&quot;&quot;&quot;</span>


<span class="c1"># str.strip</span>

<span class="s2">&quot;Andy&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="s1">&#39;And&#39;</span>

<span class="s2">&quot;Wor;ld!;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;!,:;&quot;</span><span class="p">)</span>
<span class="s1">&#39;Wor;ld&#39;</span>

<span class="s2">&quot;hello there&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;there&#39;</span><span class="p">]</span>

<span class="p">{</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">punctuation</span><span class="p">))</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">()}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="primes">
<h3>primes<a class="headerlink" href="#primes" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">40</span>

<span class="c1"># find all the primes less than n</span>

<span class="p">{</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="dictionary-comprehensions">
<h2>dictionary comprehensions<a class="headerlink" href="#dictionary-comprehensions" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># { key_expression : value_expression for item in iterable }</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">]</span> 

<span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="s1">&#39;elppa&#39;</span>

<span class="c1"># { &#39;apple&#39;: &#39;elppa&#39;, ...}</span>

<span class="p">{</span><span class="n">w</span><span class="p">:</span><span class="n">w</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;elppa&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="s1">&#39;ananab&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">:</span> <span class="s1">&#39;yrrehc&#39;</span><span class="p">}</span>

<span class="p">{</span><span class="n">w</span><span class="p">:</span><span class="n">w</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="s1">&#39;ananab&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">:</span> <span class="s1">&#39;yrrehc&#39;</span><span class="p">}</span>

<span class="p">{</span> <span class="n">w</span> <span class="p">:</span> <span class="n">w</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="k">else</span> <span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="s1">&#39;ananab&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">:</span> <span class="s1">&#39;yrrehc&#39;</span><span class="p">}</span>
<span class="n">More</span> <span class="n">Use</span> <span class="n">Cases</span>

<span class="n">original</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="p">{</span>
    <span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">original</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="n">nested</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;first&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;second&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}}</span>

<span class="n">flattened</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;first_a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;first_b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;second_c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;second_d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="p">{</span>
    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">outer_key</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">inner_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">inner_val</span>
    
    <span class="k">for</span> <span class="n">outer_key</span><span class="p">,</span> <span class="n">inner_dict</span> <span class="ow">in</span> <span class="n">nested</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> 
        <span class="k">for</span> <span class="n">inner_key</span><span class="p">,</span> <span class="n">inner_val</span> <span class="ow">in</span> <span class="n">inner_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;first_a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;first_b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;second_c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;second_d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="p">{</span> <span class="n">v</span><span class="p">:</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}</span>
</pre></div>
</div>
<section id="id2">
<h3>exercise<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Example Input:</span>

<span class="go">d1 = {&#39;a&#39;: 1, &#39;b&#39;: 2}</span>
<span class="go">d2 = {&#39;b&#39;: 3, &#39;c&#39;: 4}</span>
<span class="go">Expected Output:</span>

<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 5, &#39;c&#39;: 4}  # &#39;b&#39; is the sum of 2 (from d1) and 3 (from d2); &#39;a&#39; and &#39;c&#39; are unique to d1 and d2, respectively.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="c1"># ...we want the output to be:</span>

<span class="n">merged</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="p">[</span><span class="mi">17</span><span class="p">]</span>
<span class="n">d1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">dict_keys</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="p">[</span><span class="mi">18</span><span class="p">]</span>
<span class="n">d2</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">dict_keys</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="p">[</span><span class="mi">19</span><span class="p">]</span>
<span class="n">d1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">|</span> <span class="n">d2</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">}</span>
<span class="c1"># where k shows up in both: sum</span>
<span class="c1"># where k shows up in left: left value</span>
<span class="c1"># where k shows up in right: right value</span>
<span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="p">{</span>
    <span class="n">k</span><span class="p">:</span> <span class="n">d1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">d2</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">d1</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d2</span><span class="p">)</span>
    <span class="k">else</span> <span class="n">d1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d1</span>
    <span class="k">else</span> <span class="n">d2</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>        
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">|</span> <span class="n">d2</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="c1"># merged = {&#39;a&#39;: 1, &#39;b&#39;: 5, &#39;c&#39;: 4}</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="c1"># we want the output to be:</span>

<span class="n">merged</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="c1"># .get()</span>

<span class="n">d1</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="mi">1</span>

<span class="n">d1</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;aaslfkjas&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">2</span>

<span class="n">d1</span><span class="p">[</span><span class="s1">&#39;aaslfkjas&#39;</span><span class="p">]</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="s1">&#39;aaslfkjas&#39;</span>

<span class="p">{</span>
    <span class="n">k</span><span class="p">:</span> <span class="n">d1</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">d2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>     
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">|</span> <span class="n">d2</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="c1"># where k shows up in both: sum</span>
<span class="c1"># where k shows up in left: left value</span>
<span class="c1"># where k shows up in right: right value</span>

<span class="n">d1</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>

<span class="nb">set</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>

<span class="p">{</span>
    <span class="n">k</span><span class="p">:</span> <span class="n">d1</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">d2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="iterator">
<h2>iterator<a class="headerlink" href="#iterator" title="Link to this heading">¶</a></h2>
<p>iterator vs iterable:</p>
<ul class="simple">
<li><p>iterable: an object that could be iterated upon, a collection which could be looped over</p></li>
<li><p>iterator: the mechanism that performs the iteration</p></li>
<li><p>every iterator is an iterable, but not vice versa</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="nb">next</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span> <span class="nb">object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">an</span> <span class="n">iterator</span>

<span class="n">my_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>

<span class="n">my_iter</span>
<span class="o">&lt;</span><span class="n">list_iterator</span> <span class="n">at</span> <span class="mh">0x10a289420</span><span class="o">&gt;</span>

<span class="nb">next</span><span class="p">(</span><span class="n">my_iter</span><span class="p">)</span>
<span class="mi">1</span>

<span class="nb">next</span><span class="p">(</span><span class="n">my_iter</span><span class="p">)</span>
<span class="mi">2</span>

<span class="nb">next</span><span class="p">(</span><span class="n">my_iter</span><span class="p">)</span>
<span class="mi">3</span>

<span class="nb">next</span><span class="p">(</span><span class="n">my_iter</span><span class="p">)</span>
<span class="ne">StopIteration</span><span class="p">:</span>

<span class="n">my_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">)</span>

<span class="n">tuple_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">my_tuple</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">fruit</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">tuple_iter</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">fruit</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">break</span>
<span class="n">apple</span>
<span class="n">banana</span>
<span class="n">cherry</span>
</pre></div>
</div>
<section id="iterator-protocol">
<h3>iterator protocol<a class="headerlink" href="#iterator-protocol" title="Link to this heading">¶</a></h3>
<p>what is a the iterator protocol?</p>
<ul class="simple">
<li><p><strong>iter</strong>() - initializes the iteration</p></li>
<li><p><strong>next</strong>() - returns the next iterm from the collection; raises StopIteration when exhausted</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># FunctionalIterator(start_value, end_value, func) -&gt; </span>
<span class="n">squares_iterator</span> <span class="o">=</span> <span class="n">FunctionalIterator</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">square</span><span class="p">)</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">suqares_iterator</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    
<span class="c1"># 1, 4, 9, 16, 25</span>

<span class="k">class</span> <span class="nc">FunctionalIterator</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
    
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>


<span class="n">square</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">squares_iterator</span> <span class="o">=</span> <span class="n">FunctionalIterator</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">square</span><span class="p">)</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">squares_iterator</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    
<span class="c1"># 1, 4, 9, 16, 25</span>
<span class="mi">1</span>
<span class="mi">4</span>
<span class="mi">9</span>
<span class="mi">16</span>
<span class="mi">25</span>
</pre></div>
</div>
</section>
</section>
<section id="generator">
<h2>generator<a class="headerlink" href="#generator" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>an iterable, but of a unique kind</p></li>
<li><p>indexing is NOT allowed</p></li>
<li><p>iteration with for loops or next is</p></li>
</ul>
<ul class="simple">
<li><p>yield statement is used to define a generator, replacing the return of a function to provide a result to its caller without destroying local variables</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">countdown</span><span class="p">():</span>
	<span class="n">i</span><span class="o">=</span><span class="mi">5</span>
	<span class="k">while</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">yield</span> <span class="n">i</span>  <span class="c1"># return value i &amp; continue</span>
		<span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>


<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># 5 4 3 2 1</span>

	
<span class="c1"># they can be infinite!</span>
<span class="k">def</span> <span class="nf">infinite_sevens</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="mi">7</span>


<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">infinite_sevens</span><span class="p">():</span>
	<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
	
<span class="c1"># Finite generators can be converted into lists by passing them as arguments to the list function</span>

<span class="k">def</span> <span class="nf">numbers</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">yield</span> <span class="n">i</span>


<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">numbers</span><span class="p">(</span><span class="mi">11</span><span class="p">)))</span> <span class="c1"># [0, 2, 4, 6, 8, 10]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">even_numbers</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">even_numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="c1"># 0, 2, 4, 6, 8</span>
<span class="mi">0</span>
<span class="mi">2</span>
<span class="mi">4</span>
<span class="mi">6</span>
<span class="mi">8</span>

<span class="n">gen</span> <span class="o">=</span> <span class="n">even_numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="mi">0</span>

<span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="mi">2</span>
</pre></div>
</div>
<section id="generator-expressions">
<h3>generator expressions<a class="headerlink" href="#generator-expressions" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>generator functions: like regular functions but with yield instead of return</p></li>
<li><p>generator expressions: like list/set comprehensions but with () instead of []</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># even numbers up to a limit</span>

<span class="n">gen_expr</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="nb">next</span><span class="p">(</span><span class="n">gen_expr</span><span class="p">)</span>
<span class="mi">2</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">gen_expr</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="mi">0</span>
<span class="mi">2</span>
<span class="mi">4</span>
<span class="mi">6</span>
<span class="mi">8</span>


<span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="mi">20</span>
</pre></div>
</div>
</section>
<section id="way-communication">
<h3>2-way communication<a class="headerlink" href="#way-communication" title="Link to this heading">¶</a></h3>
<p>generators can also consume data!</p>
<ul class="simple">
<li><p>implemented via .send()</p></li>
<li><p>needs to be primed first</p></li>
<li><p>2-way generators are typically called coroutines (“coros”)</p></li>
<li><p>exceedingly popular in async programming</p></li>
<li><p>in functional programming, the 1-way paradigm of generators as producers of data reigns</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gen</span> <span class="o">=</span> <span class="n">echo</span><span class="p">()</span>
<span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="n">gen</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;hello there&quot;</span><span class="p">)</span> <span class="c1"># &quot;you said: hello there&quot;</span>


<span class="k">def</span> <span class="nf">echo</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">received</span> <span class="o">=</span> <span class="k">yield</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;you said: &quot;</span><span class="p">,</span> <span class="n">received</span><span class="p">)</span>


<span class="c1"># truthy counter generator </span>
<span class="k">def</span> <span class="nf">counter</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">received</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">count</span>
        <span class="k">if</span> <span class="n">received</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">count_gen</span> <span class="o">=</span> <span class="n">counter</span><span class="p">()</span>
<span class="nb">next</span><span class="p">(</span><span class="n">count_gen</span><span class="p">)</span> <span class="c1"># priming</span>
<span class="mi">0</span>

<span class="n">count_gen</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;hey&quot;</span><span class="p">)</span>
<span class="mi">1</span>
<span class="n">count_gen</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="mi">1</span>
<span class="n">count_gen</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Item1&quot;</span><span class="p">)</span>
<span class="mi">2</span>
<span class="n">count_gen</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="mi">2</span>
<span class="n">count_gen</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Another item&quot;</span><span class="p">)</span>
<span class="mi">3</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fib</span><span class="p">():</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">a</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
        
        <span class="c1"># equivalent to:</span>
        <span class="c1"># temp = a</span>
        <span class="c1"># a = b</span>
        <span class="c1"># b = temp + b</span>
        
<span class="n">gen</span> <span class="o">=</span> <span class="n">fib</span><span class="p">()</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>
<span class="mi">0</span>
<span class="mi">1</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">5</span>
<span class="mi">8</span>
<span class="mi">13</span>
<span class="mi">21</span>
<span class="mi">34</span>
<span class="mi">55</span>
<span class="mi">89</span>
<span class="mi">144</span>
<span class="mi">233</span>
<span class="mi">377</span>
<span class="mi">610</span>
<span class="mi">987</span>
<span class="mi">1597</span>
<span class="mi">2584</span>
<span class="mi">4181</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3>exercise<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>Sliding Window Fibonacci With Deque</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fib</span><span class="p">():</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">a</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="kn">import</span> <span class="nn">collections</span>
<span class="n">collections</span><span class="o">.</span><span class="n">deque</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>

<span class="n">window</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">gen</span> <span class="o">=</span> <span class="n">fib</span><span class="p">()</span>

<span class="c1"># last n fibs less than or equal to some m, e.g last 3 fib &lt;= 20</span>

<span class="k">def</span> <span class="nf">fib_sliding_window</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">gen</span> <span class="o">=</span> <span class="n">fib</span><span class="p">()</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">window</span><span class="p">)</span> <span class="o">==</span> <span class="n">window_size</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">window</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">break</span>

<span class="n">fib_sliding_window</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>refactor: what if we want to start from an arbitrary set of numbers, rather than alway 0, 1?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">start_points</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)):</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">start_points</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">a</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">fib_sliding_window</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">start_points</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)):</span>
    <span class="n">gen</span> <span class="o">=</span> <span class="n">fib</span><span class="p">(</span><span class="n">start_points</span><span class="p">)</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">window</span><span class="p">)</span> <span class="o">==</span> <span class="n">window_size</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">window</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">break</span>

<span class="n">fib_sliding_window</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">start_points</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">24</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">deque</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">39</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="data-pipelining">
<h3>data pipelining<a class="headerlink" href="#data-pipelining" title="Link to this heading">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">logfile.log</span>

<span class="go">2024-06-01 09:15:34 INFO Server started successfully</span>
<span class="go">2024-06-01 09:17:42 ERROR Unable to connect to database</span>
<span class="go">2024-06-02 09:18:05 INFO Received request from 192.168.1.10</span>
<span class="go">2024-06-02 09:19:20 ERROR Disk space low on drive C:</span>
<span class="go">2024-06-03 09:21:00 INFO User admin logged in</span>
<span class="go">2024-06-03 09:22:15 WARNING CPU usage is high</span>
<span class="go">2024-06-04 09:23:30 ERROR Failed to send email notification</span>
<span class="go">2024-06-04 09:25:45 INFO Scheduled maintenance starts in 10 minutes</span>
<span class="go">2024-06-05 09:27:00 ERROR Backup process failed</span>
<span class="go">2024-06-05 09:30:20 INFO New connection from 192.168.1.15</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># make sure it&#39;s in your working dir</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="s1">&#39;.log&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()))</span>
<span class="p">[</span><span class="s1">&#39;logfile.log&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">read_lines</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="c1"># line -&gt; yes/no filter</span>

<span class="k">def</span> <span class="nf">filter_errors</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;ERROR&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">line</span>

<span class="k">def</span> <span class="nf">parse_logs</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">date</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">log</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">date</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">log</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;logfile.log&quot;</span>

<span class="n">lines</span> <span class="o">=</span> <span class="n">read_lines</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">errors</span> <span class="o">=</span> <span class="n">filter_errors</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="n">logs</span> <span class="o">=</span> <span class="n">parse_logs</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>

<span class="k">for</span> <span class="n">log</span> <span class="ow">in</span> <span class="n">logs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">log</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;2024-06-01&#39;</span><span class="p">,</span> <span class="s1">&#39;09:17:42&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR Unable to connect to database&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;2024-06-02&#39;</span><span class="p">,</span> <span class="s1">&#39;09:19:20&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR Disk space low on drive C:&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;2024-06-04&#39;</span><span class="p">,</span> <span class="s1">&#39;09:23:30&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR Failed to send email notification&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;2024-06-05&#39;</span><span class="p">,</span> <span class="s1">&#39;09:27:00&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR Backup process failed&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Using generators results in improved performance, which is the result of the lazy (on demand) generation of values, which translates to lower memory usage.</p></li>
<li><p>do not need to wait until all the elements have been generated before we start to use them</p></li>
</ul>
</section>
</section>
<section id="recursion">
<h2>recursion<a class="headerlink" href="#recursion" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>a function calling itself…</p></li>
<li><p>where this becomes useful: successive calls are for progressively smaller versions of the problem</p></li>
<li><p>recursive functions have two components:</p>
<ul>
<li><p>base case: the simplest chunk of the problem, typically trivial to solve</p></li>
<li><p>recursive case: the part of the function that calls itself</p></li>
</ul>
</li>
</ul>
<p>eg: 5! (5 factorial) is 5 * 4 * 3 * 2 * 1 (120)</p>
<ul class="simple">
<li><p>n! = n * (n-1)!</p></li>
<li><p>BASE CASE: 1! = 1 -&gt; can be calculated without performing any more factorial function calls</p></li>
</ul>
<p><strong>note</strong>
The base case acts as the <strong>exit condition</strong> of the recursion</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Factorial is only defined for non-negative integers.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>    


<span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">120</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="n">power</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">8</span>
</pre></div>
</div>
<p>Recursion can also be indirect.
One function can call a second, which calls the first, which calls the second, and so on.
This can occur with any number of functions</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">True</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">is_odd</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">is_odd</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
	<span class="k">return</span> <span class="ow">not</span> <span class="n">is_even</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># not! else will also return True when odd</span>


<span class="n">is_even</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>  <span class="c1"># False</span>
<span class="n">is_even</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="c1"># True</span>
<span class="n">is_odd</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>  <span class="c1"># True</span>
</pre></div>
</div>
<section id="recursion-trees-recurrence-relations">
<h3>recursion trees &amp; recurrence relations<a class="headerlink" href="#recursion-trees-recurrence-relations" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>recursion trees: a tree that helps visualize the execution foa  recursive function</p></li>
<li><p>recurrence relations: a mathematical representation linking the base and recursive cases</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>factorial<span class="o">(</span><span class="m">5</span><span class="o">)</span>
<span class="gp"># </span>│
<span class="gp"># </span>├─<span class="w"> </span>factorial<span class="o">(</span><span class="m">4</span><span class="o">)</span>
<span class="gp"># </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>├─<span class="w"> </span>factorial<span class="o">(</span><span class="m">3</span><span class="o">)</span>
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>├─<span class="w"> </span>factorial<span class="o">(</span><span class="m">2</span><span class="o">)</span>
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>├─<span class="w"> </span>factorial<span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>└─<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="o">[</span>Base<span class="w"> </span><span class="k">case</span><span class="o">]</span>
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>└─<span class="w"> </span><span class="m">2</span>
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>│<span class="w">  </span>└─<span class="w"> </span><span class="m">6</span>
<span class="gp"># </span>│<span class="w">  </span>│
<span class="gp"># </span>│<span class="w">  </span>└─<span class="w"> </span><span class="m">24</span>
<span class="gp"># </span>│
<span class="gp"># </span>└─<span class="w"> </span><span class="m">120</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">recursive_function</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">base_condition_met</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">base_case_value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">relation_to_recursive_function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tail-recursion-recursion-limits">
<h3>tail recursion &amp; recursion limits<a class="headerlink" href="#tail-recursion-recursion-limits" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>constant stack space!</p>
<ul>
<li><p>memory required to store that variables in a function is fixed</p></li>
</ul>
</li>
<li><p>linear stack space</p>
<ul>
<li><p>linearly proportional to the input size</p></li>
</ul>
</li>
<li><p>tail recursion is a special case of recursion where the recursive call is the last thing executed in the function</p></li>
<li><p>cpython does NOT implement tail call optimization</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">accumulator</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">accumulator</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># return n * factorial(n - 1)</span>
        <span class="k">return</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">*</span> <span class="n">accumulator</span><span class="p">)</span>

<span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">120</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">getrecursionlimit</span><span class="p">()</span>
<span class="mi">3000</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setrecursionlimit</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="mutual-recursion">
<h3>mutual recursion<a class="headerlink" href="#mutual-recursion" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>instead of one function calling itself, two or more functions call each other</p></li>
<li><p>useful when two or more interdependent states alternate with each other</p>
<ul>
<li><p>e.g. state machines, complex mathemetical sequences</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># even -&gt; odd + 1</span>
<span class="c1"># odd -&gt; even + 1</span>

<span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">is_odd</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">is_odd</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">is_even</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">is_odd</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">is_even</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">is_even</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Q</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">&lt;=</span><span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">Q</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">Q</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="n">Q</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">Q</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

<span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">6</span> 
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Q(n) depends Q(n-1) and Q(n-2)</span>
<span class="go">Q(n-1) depends on Q(n-2) and Q(n-3)</span>
<span class="go">Q(n-2) depends on Q(n-3) and Q(n-4)</span>
</pre></div>
</div>
</section>
<section id="parsing-structured-data">
<h3>parsing structured data<a class="headerlink" href="#parsing-structured-data" title="Link to this heading">¶</a></h3>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Heading<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Paragraph<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Another paragraph<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">html_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;html&gt;</span>
<span class="s2">    &lt;body&gt;</span>
<span class="s2">        &lt;h1&gt;Heading&lt;/h1&gt;</span>
<span class="s2">        &lt;p&gt;Paragraph&lt;/p&gt;</span>
<span class="s2">        &lt;main&gt;</span>
<span class="s2">            &lt;p&gt;Another paragraph&lt;/p&gt;</span>
<span class="s2">        &lt;/main&gt;</span>
<span class="s2">    &lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="n">cleaned_html_string</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&gt;\s+&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;&lt;&quot;</span><span class="p">,</span> <span class="n">html_string</span><span class="p">)</span>

<span class="c1"># parse_tag -&gt; process the string and identify tags </span>
<span class="c1"># parse_content -&gt; process the content</span>

<span class="k">def</span> <span class="nf">parse_tag</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">):</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found tag: </span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">end</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">parse_content</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span> <span class="nf">parse_content</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;&lt;&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content: </span><span class="si">{</span><span class="n">s</span><span class="p">[:</span><span class="n">start</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">parse_tag</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content: </span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="n">parse_tag</span><span class="p">(</span><span class="n">cleaned_html_string</span><span class="p">)</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">html</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">body</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">h1</span>
<span class="n">Content</span><span class="p">:</span> <span class="n">Heading</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="o">/</span><span class="n">h1</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">p</span>
<span class="n">Content</span><span class="p">:</span> <span class="n">Paragraph</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="o">/</span><span class="n">p</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">main</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">p</span>
<span class="n">Content</span><span class="p">:</span> <span class="n">Another</span> <span class="n">paragraph</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="o">/</span><span class="n">p</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="o">/</span><span class="n">main</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="o">/</span><span class="n">body</span>
<span class="n">Content</span><span class="p">:</span> 
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="o">/</span><span class="n">html</span>
<span class="n">Content</span><span class="p">:</span> 

<span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#1 - get rid of empty content output</span>
<span class="c1">#2 - get rid of closing tag content</span>

<span class="k">def</span> <span class="nf">parse_tag</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">):</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tag</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found tag: </span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">parse_content</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span> <span class="nf">parse_content</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;&lt;&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> 
            <span class="k">if</span> <span class="n">content</span><span class="p">:</span>                
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content: </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="k">return</span> <span class="n">parse_tag</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content: </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="n">parse_tag</span><span class="p">(</span><span class="n">cleaned_html_string</span><span class="p">)</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">html</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">body</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">h1</span>
<span class="n">Content</span><span class="p">:</span> <span class="n">Heading</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">p</span>
<span class="n">Content</span><span class="p">:</span> <span class="n">Paragraph</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">main</span>
<span class="n">Found</span> <span class="n">tag</span><span class="p">:</span> <span class="n">p</span>
<span class="n">Content</span><span class="p">:</span> <span class="n">Another</span> <span class="n">paragraph</span>

<span class="s1">&#39;&#39;</span>
</pre></div>
</div>
</section>
<section id="binary-search">
<h3>binary search<a class="headerlink" href="#binary-search" title="Link to this heading">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Implement a recursive function to perform a binary search on a sorted array.</span>

<span class="go">def binary_search(arr, low, high, key):</span>
<span class="gp">    # </span>implementation
<span class="go">Parameters:</span>

<span class="go">arr (list): A list of sorted elements (can be numbers or strings).</span>
<span class="go">low (int): The starting index of the array.</span>
<span class="go">high (int): The ending index of the array.</span>
<span class="go">key: The element you are searching for in the array.</span>
<span class="go">Return</span>

<span class="go">The function should return the index of key in arr if key is present. If key is not in the array, return -1.</span>

<span class="go">Constraints:</span>

<span class="go">Assume the array is sorted in ascending order.</span>
<span class="go">The solution must use recursion, not iteration.</span>
<span class="go">Example:</span>

<span class="go">arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>

<span class="go">print(binary_search(arr, 0, len(arr) - 1, 5))  # Should return 4</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">high</span> <span class="o">&gt;=</span> <span class="n">low</span><span class="p">:</span>
        <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">high</span> <span class="o">+</span> <span class="n">low</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="c1"># 5 // 2 -&gt; 2, rounded down</span>
        
        <span class="k">if</span> <span class="n">arr</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span> <span class="c1"># mid of arr = key: success!</span>
            <span class="k">return</span> <span class="n">mid</span>
        <span class="k">elif</span> <span class="n">arr</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">key</span><span class="p">:</span> <span class="c1"># mid &gt; key -&gt; search the left half of the arr</span>
            <span class="k">return</span> <span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># mid &lt; key -&gt; search te right half of the arr</span>
            <span class="k">return</span> <span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="mi">4</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="o">-</span><span class="mi">1</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">9</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="refactored-signature">
<h3>refactored signature<a class="headerlink" href="#refactored-signature" title="Link to this heading">¶</a></h3>
<p>Refactor the previous binary_search implementation so that it exposes a simpler interface where only arr and key are specified.</p>
<p>The core algorithm should continue to use recursion and does not need much refactoring.</p>
<p>Hint: consider defining a HOF with a simpler signature that wraps around our previous implementation.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>FROM:
<span class="go">def binary_search(arr, low, high, key):</span>
<span class="go">    pass</span>

<span class="gp"># </span>TO:
<span class="go">def binary_search(arr, key):</span>
<span class="go">    pass</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">recursive_search</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">high</span> <span class="o">&gt;=</span> <span class="n">low</span><span class="p">:</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">high</span> <span class="o">+</span> <span class="n">low</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> 
            
            <span class="k">if</span> <span class="n">arr</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span> 
                <span class="k">return</span> <span class="n">mid</span>
            <span class="k">elif</span> <span class="n">arr</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">key</span><span class="p">:</span> 
                <span class="k">return</span> <span class="n">recursive_search</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> 
                <span class="k">return</span> <span class="n">recursive_search</span><span class="p">(</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">recursive_search</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">4</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="o">-</span><span class="mi">1</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">9</span>

<span class="n">binary_search</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="functools">
<h2>functools<a class="headerlink" href="#functools" title="Link to this heading">¶</a></h2>
<section id="reduce">
<h3>reduce<a class="headerlink" href="#reduce" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>apply reduction function to an iterable to produce single cumulative value</p></li>
</ul>
<p>reduce() takes two required arguments:</p>
<ol class="arabic simple">
<li><p>function can be any Python callable that accepts two arguments and returns a value.</p></li>
<li><p>iterable can be any Python iterable.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">))</span>

<span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">,</span> <span class="n">files</span><span class="p">))</span>
<span class="mi">4377381</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Accumulate</span>
<span class="c1"># reduce() -&gt; takes an iterable and returns a single number, after applying a rolling computation</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
<span class="mi">15</span>

<span class="c1"># reduce(</span>
<span class="c1">#   func(accumulator, current_item),</span>
<span class="c1">#   iterable</span>
<span class="c1"># )</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span>
    <span class="n">numbers</span>
<span class="p">)</span>
<span class="mi">15</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">sum_of_numbers</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sum_of_numbers</span><span class="p">)</span>  <span class="c1"># 15</span>
<span class="mi">15</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;cherry&quot;</span><span class="p">]</span>

<span class="p">{</span>
    <span class="s2">&quot;apple&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;banana&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s2">&quot;cherry&quot;</span><span class="p">:</span> <span class="mi">6</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">word</span><span class="p">,</span>
    <span class="n">words</span>    
<span class="p">)</span>
<span class="s1">&#39;applebananacherry&#39;</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">word</span><span class="p">,</span>
    <span class="n">words</span><span class="p">,</span>
    <span class="p">{}</span>
<span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s1">&#39;dict&#39;</span> <span class="ow">and</span> <span class="s1">&#39;str&#39;</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;word&quot;</span><span class="p">:</span> <span class="n">word</span><span class="p">},</span>
    <span class="n">words</span><span class="p">,</span>
    <span class="p">{}</span>
<span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;word&#39;</span><span class="p">:</span> <span class="s1">&#39;cherry&#39;</span><span class="p">}</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="p">{</span><span class="n">word</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)},</span>
    <span class="n">words</span><span class="p">,</span>
    <span class="p">{}</span>
<span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;cherry&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="p">{</span><span class="o">**</span><span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)},</span>
    <span class="n">words</span><span class="p">,</span>
    <span class="p">{}</span>
<span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dict_list</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}]</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="n">reduce</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span><span class="o">**</span><span class="n">acc</span><span class="p">,</span> <span class="o">**</span><span class="n">x</span><span class="p">},</span>
    <span class="n">dict_list</span>
<span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 5! =</span>
<span class="mi">5</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="mi">1</span>
<span class="mi">120</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">acc</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span>
        <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">)</span>

<span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">120</span>
</pre></div>
</div>
<p>use reduce() to calculate the greatest common divisor of a list of integers</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">48</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">84</span><span class="p">]</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">gcd</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">48</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">84</span><span class="p">]</span>

<span class="n">reduce</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="mi">12</span>
</pre></div>
</div>
<p>find the average RGB across a list of pixel tuples using reduce() and map()</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pixels</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="p">(</span><span class="mi">110</span><span class="p">,</span> <span class="mi">190</span><span class="p">,</span> <span class="mi">220</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">210</span><span class="p">),</span> <span class="p">(</span><span class="mi">130</span><span class="p">,</span> <span class="mi">210</span><span class="p">,</span> <span class="mi">230</span><span class="p">)]</span>

<span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="n">pixels</span><span class="p">),</span>
    <span class="n">reduce</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">xi</span> <span class="o">+</span> <span class="n">yi</span> <span class="k">for</span> <span class="n">xi</span><span class="p">,</span> <span class="n">yi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
        <span class="n">pixels</span>
    <span class="p">)</span>
<span class="p">))</span>
<span class="p">(</span><span class="mi">115</span><span class="p">,</span> <span class="mi">195</span><span class="p">,</span> <span class="mi">228</span><span class="p">)</span>
</pre></div>
</div>
<p>run-length encoding (RLE) is a basic form of lossless data compression where sequences of identical data values (runs) are stored as a single data value and count</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># assert run_length_encode(&quot;AABCCDEEEE&quot;) == &quot;A2B1C2D1E4&quot;</span>
<span class="c1"># AABCCDEEEE -&gt; (&quot;A&quot;, 2), (&quot;B&quot;, 1), (&quot;C&quot;, 2)... -&gt; A2B1C2...</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="k">def</span> <span class="nf">run_length_encode</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">reducer</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">acc</span> <span class="ow">and</span> <span class="n">char</span> <span class="o">==</span> <span class="n">acc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">acc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">acc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">acc</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">char</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        
        <span class="k">return</span> <span class="n">acc</span>
    
    <span class="c1"># encoded string</span>
    <span class="n">encoded_pairs</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">reducer</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">[])</span> <span class="c1"># -&gt; [(&quot;A&quot;, 2), (&quot;B&quot;, 1), (&quot;C&quot;, 2)...]</span>
    
    <span class="n">encoded_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">char</span><span class="si">}{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">char</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">encoded_pairs</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">encoded_str</span>

<span class="n">run_length_encode</span><span class="p">(</span><span class="s2">&quot;AABCCDEEEEEPOOPPPPDODOOPPP&quot;</span><span class="p">)</span>
<span class="s1">&#39;A2B1C2D1E5P1O2P4D1O1D1O2P3&#39;</span>
</pre></div>
</div>
</section>
<section id="wraps">
<h3>wraps<a class="headerlink" href="#wraps" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="c1"># keep track # times func ran</span>
<span class="k">def</span> <span class="nf">measure_fn</span><span class="p">(</span><span class="n">original_function</span><span class="p">):</span>
    <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">original_function</span><span class="p">)</span>  <span class="c1"># keep docstrings &amp; function name</span>
    <span class="k">def</span> <span class="nf">wrapper_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">original_function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span>
        <span class="k">return</span> <span class="n">original_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># execute</span>
        <span class="c1"># print(f&quot;this code adds functionality &amp; after {original_function.__name__}&quot;)</span>
    <span class="k">return</span> <span class="n">wrapper_function</span>
</pre></div>
</div>
</section>
<section id="lru-cache">
<h3>lru_cache<a class="headerlink" href="#lru-cache" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># least recently used cache -&gt; e.g. no function calls 4 same values</span>
<span class="nd">@measure_fn</span>
<span class="k">def</span> <span class="nf">fibonnaci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a number in the Fibonacci sequence.&quot;&quot;&quot;</span>
    <span class="c1"># todo: im gonna forget this</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">fibonnaci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonnaci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="closures">
<h2>closures<a class="headerlink" href="#closures" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>helps us to reduce the use of global variables</p></li>
<li><p>if we need many functions, then go for class (OOP)</p></li>
<li><p>if only 1 extra method, an elegant solution would be to use a closure rather than a class</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">by_factor</span><span class="p">(</span><span class="n">factor</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">number</span>
    <span class="k">return</span> <span class="n">multiply</span>  <span class="c1"># no () !</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">double</span> <span class="o">=</span> <span class="n">by_factor</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">double</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triple</span> <span class="o">=</span> <span class="n">by_factor</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triple</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
<section id="invoke-outside-scope">
<h3>invoke outside scope<a class="headerlink" href="#invoke-outside-scope" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span> 
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;example.log&#39;</span><span class="p">,</span>
                    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span> 
 
<span class="k">def</span> <span class="nf">logger</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> 
    <span class="k">def</span> <span class="nf">log_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span> 
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> 
            <span class="s1">&#39;Running &quot;</span><span class="si">{}</span><span class="s1">&quot; with arguments </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                                                    <span class="n">args</span><span class="p">))</span> 
        <span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span> 
    <span class="k">return</span> <span class="n">log_func</span>             
 
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span> 
 
<span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span><span class="o">-</span><span class="n">y</span> 
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_logger</span> <span class="o">=</span> <span class="n">logger</span><span class="p">(</span><span class="n">add</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sub_logger</span> <span class="o">=</span> <span class="n">logger</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_logger</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sub_logger</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">8</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>example.log<span class="w"> </span>
INFO:root:Running<span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="w"> </span>with<span class="w"> </span>arguments<span class="w"> </span><span class="o">(</span><span class="m">3</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>
INFO:root:Running<span class="w"> </span><span class="s2">&quot;sub&quot;</span><span class="w"> </span>with<span class="w"> </span>arguments<span class="w"> </span><span class="o">(</span><span class="m">12</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="using-lambdas">
<h3>using lambdas<a class="headerlink" href="#using-lambdas" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">by_factor</span><span class="p">(</span><span class="n">factor</span><span class="p">):</span>
	<span class="k">return</span> <span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">number</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">quadruple</span> <span class="o">=</span> <span class="n">by_factor</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quadruple</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">16</span>
</pre></div>
</div>
</section>
</section>
<section id="decorators">
<h2>decorators<a class="headerlink" href="#decorators" title="Link to this heading">¶</a></h2>
<p>add logic to function without changing it</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Frying the food&quot;</span>

<span class="k">def</span> <span class="nf">grill</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Grilling the food&quot;</span>

<span class="k">def</span> <span class="nf">boil</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Boiling the food&quot;</span>

<span class="k">def</span> <span class="nf">seasoning</span><span class="p">(</span><span class="n">chef</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding some salt and pepper&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">chef</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@seasoning</span>
<span class="k">def</span> <span class="nf">fry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Frying the food&quot;</span>

<span class="nd">@seasoning</span>
<span class="k">def</span> <span class="nf">grill</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Grilling the food&quot;</span>

<span class="nd">@seasoning</span>
<span class="k">def</span> <span class="nf">boil</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Boiling the food&quot;</span>

<span class="n">fry</span><span class="p">()</span>
<span class="n">Adding</span> <span class="n">some</span> <span class="n">salt</span> <span class="ow">and</span> <span class="n">pepper</span>

<span class="s1">&#39;Frying the food&#39;</span>

<span class="k">def</span> <span class="nf">fry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Frying the food&quot;</span>

<span class="n">seasoned_fry</span> <span class="o">=</span> <span class="n">seasoning</span><span class="p">(</span><span class="n">fry</span><span class="p">)</span>

<span class="n">seasoned_fry</span><span class="p">()</span>
<span class="n">Adding</span> <span class="n">some</span> <span class="n">salt</span> <span class="ow">and</span> <span class="n">pepper</span>

<span class="s1">&#39;Frying the food&#39;</span>
</pre></div>
</div>
<section id="timer">
<h3>timer<a class="headerlink" href="#timer" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">import</span> <span class="nn">statistics</span> <span class="k">as</span> <span class="nn">st</span>


<span class="k">def</span> <span class="nf">timer</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_timer</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;execution time: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">_timer</span>  <span class="c1"># call inner function</span>


<span class="nd">@timer</span>
<span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;summary&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">summary</span><span class="p">(</span>
        <span class="n">st</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
        <span class="n">st</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
        <span class="n">st</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
    <span class="n">pprint</span><span class="o">.</span><span class="n">pp</span><span class="p">(</span><span class="n">describe</span><span class="p">(</span><span class="n">sample</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">execution time: 0.0011296272277832031</span>
<span class="go">summary(mean=6.5, median=7.0, mode=7)</span>
</pre></div>
</div>
<p>using perf counter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">perf_counter</span>

<span class="k">def</span> <span class="nf">timed</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>        
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> took </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">end_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds to execute.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@timed</span>
<span class="k">def</span> <span class="nf">loop_this_many_times</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="s2">&quot;testing&quot;</span>

<span class="n">loop_this_many_times</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Function</span> <span class="n">loop_this_many_times</span> <span class="n">took</span> <span class="mf">0.0032</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">execute</span><span class="o">.</span>

<span class="s1">&#39;testing&#39;</span>

<span class="n">loop_this_many_times</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
<span class="n">Function</span> <span class="n">loop_this_many_times</span> <span class="n">took</span> <span class="mf">0.0426</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">execute</span><span class="o">.</span>


<span class="n">loop_this_many_times</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">7</span><span class="p">)</span>
<span class="n">Function</span> <span class="n">loop_this_many_times</span> <span class="n">took</span> <span class="mf">0.3375</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">execute</span><span class="o">.</span>


<span class="n">loop_this_many_times</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">8</span><span class="p">)</span>
<span class="n">Function</span> <span class="n">loop_this_many_times</span> <span class="n">took</span> <span class="mf">4.5683</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">execute</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="backoff">
<h3>backoff<a class="headerlink" href="#backoff" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">backoff</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="c1"># https://requests.readthedocs.io/en/latest/user/quickstart/</span>
<span class="c1"># https://pypi.org/project/backoff/</span>


<span class="k">def</span> <span class="nf">header</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="n">hdr</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;deflate&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0&#39;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">hdr</span>


<span class="nd">@backoff</span><span class="o">.</span><span class="n">on_exception</span><span class="p">(</span><span class="n">backoff</span><span class="o">.</span><span class="n">expo</span><span class="p">,</span>
                      <span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">Timeout</span><span class="p">,</span>
                       <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">ConnectionError</span><span class="p">),</span>
                      <span class="n">max_time</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">request_json</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">custom_header</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">custom_header</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">http_err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;request failed with HTTPError: </span><span class="si">{</span><span class="n">http_err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">json_err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;couldn&#39;t decode request&#39;s response into json: </span><span class="si">{</span><span class="n">json_err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Request failed with exception: </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># code here is executed when there is no error</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</section>
<section id="advanced-decorators">
<h3>advanced decorators<a class="headerlink" href="#advanced-decorators" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calories_burned</span><span class="p">(</span><span class="n">duration_in_minutes</span><span class="p">,</span> <span class="n">calories_burned_per_minute</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">duration_in_minutes</span> <span class="o">*</span> <span class="n">calories_burned_per_minute</span>

<span class="n">calories_burned</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">300</span>

<span class="k">def</span> <span class="nf">ensure_healthy_workout</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This workout is not intense enough.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Well done. Target exceeded by </span><span class="si">{</span><span class="n">result</span><span class="o">-</span><span class="mi">500</span><span class="si">}</span><span class="s2"> calories.&quot;</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@ensure_healthy_workout</span>
<span class="k">def</span> <span class="nf">calories_burned</span><span class="p">(</span><span class="n">duration_in_minutes</span><span class="p">,</span> <span class="n">calories_burned_per_minute</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">duration_in_minutes</span> <span class="o">*</span> <span class="n">calories_burned_per_minute</span>

<span class="n">calories_burned</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">This</span> <span class="n">workout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">intense</span> <span class="n">enough</span><span class="o">.</span>


<span class="n">calories_burned</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">Well</span> <span class="n">done</span><span class="o">.</span> <span class="n">Target</span> <span class="n">exceeded</span> <span class="n">by</span> <span class="mi">100</span> <span class="n">calories</span><span class="o">.</span>


<span class="k">def</span> <span class="nf">ensure_healthy_workout</span><span class="p">(</span><span class="n">calorie_target</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">actual_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">&lt;</span> <span class="n">calorie_target</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This workout is not intense enough.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Well done. Target exceeded by </span><span class="si">{</span><span class="n">result</span><span class="o">-</span><span class="n">calorie_target</span><span class="si">}</span><span class="s2"> calories.&quot;</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">actual_decorator</span>

<span class="nd">@ensure_healthy_workout</span><span class="p">(</span><span class="n">calorie_target</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">calories_burned</span><span class="p">(</span><span class="n">duration_in_minutes</span><span class="p">,</span> <span class="n">calories_burned_per_minute</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">duration_in_minutes</span> <span class="o">*</span> <span class="n">calories_burned_per_minute</span>

<span class="n">calories_burned</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">Well</span> <span class="n">done</span><span class="o">.</span> <span class="n">Target</span> <span class="n">exceeded</span> <span class="n">by</span> <span class="mi">100</span> <span class="n">calories</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>

<span class="n">add</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;add&#39;</span>

<span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> with arguments </span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2"> and keyword arguments </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">original_result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> returned </span><span class="si">{</span><span class="n">original_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">original_result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="mi">7</span>

<span class="n">trace_add</span> <span class="o">=</span> <span class="n">trace</span><span class="p">(</span><span class="n">add</span><span class="p">)</span>

<span class="n">trace_add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">Calling</span> <span class="n">add</span> <span class="k">with</span> <span class="n">arguments</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="ow">and</span> <span class="n">keyword</span> <span class="n">arguments</span> <span class="p">{}</span>
<span class="n">Function</span> <span class="n">add</span> <span class="n">returned</span> <span class="mi">7</span>
<span class="mi">7</span>
</pre></div>
</div>
</section>
<section id="chaining-decorators">
<h3>chaining decorators<a class="headerlink" href="#chaining-decorators" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">passphrase</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span>

<span class="c1"># splits</span>
<span class="c1"># upperscase</span>

<span class="k">def</span> <span class="nf">uppercase</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@split</span>
<span class="nd">@uppercase</span>
<span class="k">def</span> <span class="nf">passphrase</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span>

<span class="n">passphrase</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;HORIZONTAL&#39;</span><span class="p">,</span> <span class="s1">&#39;OMIT&#39;</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;REFLECTION&#39;</span><span class="p">]</span>

<span class="c1"># @uppercase</span>
<span class="c1"># &quot;Horizontal Omit Station Reflection&quot; -&gt; &#39;HORIZONTAL OMIT STATION REFLECTION&#39;</span>
<span class="c1"># @split</span>
<span class="c1"># &#39;HORIZONTAL OMIT STATION REFLECTION&#39; -&gt; [&#39;HORIZONTAL&#39;, &#39;OMIT&#39;, &#39;STATION&#39;, &#39;REFLECTION&#39;]</span>

<span class="nd">@uppercase</span>
<span class="nd">@split</span>
<span class="k">def</span> <span class="nf">passphrase</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span>

<span class="n">passphrase</span><span class="p">()</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;upper&#39;</span>

<span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;Horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;Omit&#39;</span><span class="p">,</span> <span class="s1">&#39;Station&#39;</span><span class="p">,</span> <span class="s1">&#39;Reflection&#39;</span><span class="p">]</span>

<span class="c1"># @split</span>
<span class="c1"># &quot;Horizontal Omit Station Reflection&quot; -&gt; [&#39;Horizontal&#39;, &#39;Omit&#39;, &#39;Station&#39;, &#39;Reflection&#39;]</span>

<span class="c1"># @uppercase</span>
<span class="c1"># [&#39;Horizontal&#39;, &#39;Omit&#39;, &#39;Station&#39;, &#39;Reflection&#39;].upper() -&gt; TypeError</span>

<span class="p">[</span><span class="s1">&#39;Horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;Omit&#39;</span><span class="p">,</span> <span class="s1">&#39;Station&#39;</span><span class="p">,</span> <span class="s1">&#39;Reflection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;upper&#39;</span>
</pre></div>
</div>
</section>
<section id="wraps-preserve-id">
<h3>wraps, preserve id<a class="headerlink" href="#wraps-preserve-id" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">passphrase</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a string.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span>

<span class="n">passphrase</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.</span><span class="n">passphrase</span><span class="p">()</span><span class="o">&gt;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;passphrase&#39;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="s1">&#39;Returns a string.&#39;</span>

<span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@split</span>
<span class="k">def</span> <span class="nf">passphrase</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a string.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span>

<span class="n">passphrase</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;Horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;Omit&#39;</span><span class="p">,</span> <span class="s1">&#39;Station&#39;</span><span class="p">,</span> <span class="s1">&#39;Reflection&#39;</span><span class="p">]</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;wrapper&#39;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__doc__</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@split</span>
<span class="k">def</span> <span class="nf">passphrase</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a string.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Horizontal Omit Station Reflection&quot;</span>

<span class="n">passphrase</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;Horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;Omit&#39;</span><span class="p">,</span> <span class="s1">&#39;Station&#39;</span><span class="p">,</span> <span class="s1">&#39;Reflection&#39;</span><span class="p">]</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;passphrase&#39;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="s1">&#39;Returns a string.&#39;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="n">__wrapped__</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;passphrase&#39;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;passphrase&#39;</span>

<span class="n">passphrase</span><span class="o">.</span><span class="n">__wrapped__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">is</span> <span class="n">passphrase</span><span class="o">.</span><span class="vm">__name__</span>
<span class="kc">True</span>
<span class="c1"># copy operation!</span>
</pre></div>
</div>
</section>
<section id="practice">
<h3>practice<a class="headerlink" href="#practice" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>define a decorator called delay_decorator</p></li>
<li><p>the decorator should be applicable to a function that takes user_id and resource as parameters.</p></li>
<li><p>keep track of the delays for each user. Initially, a user may have no delay, but the delay should increase with each function call by that user</p></li>
<li><p>on each call, the delay for that user should double, starting from zero (0, 1, 2, 4, 8 seconds, etc.)</p></li>
<li><p>before the function executes, print a message indicating the delay: “Your download will start in [delay]s”</p></li>
<li><p>after the delay, the decorated function should execute normally. Ensure that the original function’s return value is not affected by the decorator</p></li>
<li><p>to test, create a function download(user_id, resource) that simulates a resource download and returns a placeholder download link. Apply your delay_decorator to the download function</p></li>
</ul>
<p>sample output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource1&quot;</span><span class="p">))</span>
<span class="c1"># Your resource is ready at: domain.com/c26689f7-1f59-4708-9626-dd40a02b0fc8</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="c1"># Your download will start in 1s...</span>
<span class="c1"># Your resource is ready at: domain.com/d2caa6fa-55c3-492a-9c7e-fd451778c2df</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="c1"># Your download will start in 2s...</span>
<span class="c1"># Your resource is ready at: domain.com/ec9b2847-e5f0-4b9f-92e6-d8b0f0100962</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>

<span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">resource</span><span class="p">):</span>
    <span class="n">download_uuid</span> <span class="o">=</span> <span class="n">uuid4</span><span class="p">()</span>
    
    <span class="n">download_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;domain.com/</span><span class="si">{</span><span class="n">download_uuid</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Your resource is ready at: </span><span class="si">{</span><span class="n">download_url</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource1&quot;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">7258252</span><span class="n">a</span><span class="o">-</span><span class="n">e4c4</span><span class="o">-</span><span class="mi">46</span><span class="n">f5</span><span class="o">-</span><span class="mi">8</span><span class="n">a21</span><span class="o">-</span><span class="mf">12e34041</span><span class="n">fac0</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ad75acfc</span><span class="o">-</span><span class="mi">862</span><span class="n">d</span><span class="o">-</span><span class="mi">465</span><span class="n">a</span><span class="o">-</span><span class="mi">9</span><span class="n">a6f</span><span class="o">-</span><span class="n">f2b7731d6d4d</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">88</span><span class="n">d22db7</span><span class="o">-</span><span class="mi">57</span><span class="n">da</span><span class="o">-</span><span class="mi">4</span><span class="n">fb1</span><span class="o">-</span><span class="mi">8</span><span class="n">def</span><span class="o">-</span><span class="mi">421</span><span class="n">f6e8f61e1</span>


<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">delay_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="n">user_delay</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">resource</span><span class="p">):</span>
        <span class="c1"># what is the applicable delay for a given user_id?</span>
        <span class="n">delay</span> <span class="o">=</span> <span class="n">user_delay</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">user_delay</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">delay</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">delay</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Your download will start in </span><span class="si">{</span><span class="n">delay</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
            
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">resource</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>

<span class="nd">@delay_decorator</span>
<span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">resource</span><span class="p">):</span>
    <span class="n">download_uuid</span> <span class="o">=</span> <span class="n">uuid4</span><span class="p">()</span>
    
    <span class="n">download_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;domain.com/</span><span class="si">{</span><span class="n">download_uuid</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Your resource is ready at: </span><span class="si">{</span><span class="n">download_url</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource1&quot;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user123&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">40</span><span class="n">ca041b</span><span class="o">-</span><span class="mi">26</span><span class="n">ef</span><span class="o">-</span><span class="mi">4</span><span class="n">a2d</span><span class="o">-</span><span class="mi">9929</span><span class="o">-</span><span class="mi">9</span><span class="n">f6340cae831</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">1</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mf">40e4</span><span class="n">af11</span><span class="o">-</span><span class="mi">13</span><span class="n">b1</span><span class="o">-</span><span class="mi">4</span><span class="n">ad9</span><span class="o">-</span><span class="n">ae90</span><span class="o">-</span><span class="mi">0</span><span class="n">b21f2602cbb</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">2</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">00</span><span class="n">b9942d</span><span class="o">-</span><span class="n">e06e</span><span class="o">-</span><span class="mf">4e33</span><span class="o">-</span><span class="mi">9</span><span class="n">f6f</span><span class="o">-</span><span class="n">c4301c4f74e3</span>


<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12asdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cb62d4c2</span><span class="o">-</span><span class="mi">1</span><span class="n">d3f</span><span class="o">-</span><span class="mi">4</span><span class="n">d06</span><span class="o">-</span><span class="n">aa1e</span><span class="o">-</span><span class="mi">3</span><span class="n">fb62967a212</span>


<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ac2fffcb</span><span class="o">-</span><span class="n">e00e</span><span class="o">-</span><span class="mi">4</span><span class="n">b94</span><span class="o">-</span><span class="n">b8e5</span><span class="o">-</span><span class="mi">8</span><span class="n">bc6b3c48e18</span>


<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">1</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">05</span><span class="n">c7e397</span><span class="o">-</span><span class="mi">5716</span><span class="o">-</span><span class="mi">49</span><span class="n">a1</span><span class="o">-</span><span class="mf">906e-1</span><span class="n">f3f5c578012</span>


<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;user12=asdasdfasdf3&quot;</span><span class="p">,</span> <span class="s2">&quot;resource2&quot;</span><span class="p">))</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">2</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">d28c5d4d</span><span class="o">-</span><span class="mi">39</span><span class="n">a5</span><span class="o">-</span><span class="mi">4710</span><span class="o">-</span><span class="mi">91</span><span class="n">b6</span><span class="o">-</span><span class="mi">7</span><span class="n">a997b446a8c</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">4</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ecf5ed1f</span><span class="o">-</span><span class="mi">9</span><span class="n">f53</span><span class="o">-</span><span class="mi">46</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">aca</span><span class="o">-</span><span class="n">fb64fa3faedb</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">8</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">e45fad9d</span><span class="o">-</span><span class="n">a81e</span><span class="o">-</span><span class="mi">4821</span><span class="o">-</span><span class="mi">91</span><span class="n">dd</span><span class="o">-</span><span class="n">b7e0e4799989</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">16</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">fe7f4096</span><span class="o">-</span><span class="mi">01</span><span class="n">cc</span><span class="o">-</span><span class="mi">47</span><span class="n">bd</span><span class="o">-</span><span class="mi">8547</span><span class="o">-</span><span class="mi">6</span><span class="n">f6ce609460b</span>
<span class="n">Your</span> <span class="n">download</span> <span class="n">will</span> <span class="n">start</span> <span class="ow">in</span> <span class="mi">32</span> <span class="n">seconds</span>
<span class="n">Your</span> <span class="n">resource</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">at</span><span class="p">:</span> <span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">8</span><span class="n">db56f70</span><span class="o">-</span><span class="mi">5059</span><span class="o">-</span><span class="mi">42</span><span class="n">ba</span><span class="o">-</span><span class="mi">81</span><span class="n">de</span><span class="o">-</span><span class="n">a9f516d17962</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">main</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../sphinx.html">sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash/index.html">bash</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="assert.html">assert python</a></li>
<li class="toctree-l2"><a class="reference internal" href="asyncio.html">asyncio</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html">itertools</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#collections">collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataclass.html">dataclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="designpatterns.html">design patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_ops.html">glob</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">functional programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamentals.html">fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="generator.html">generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="pandas.html">pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="regex.html">regex</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">code library</a></li>
</ul>
</li>
</ul>

  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">functional programming</a><ul>
<li><a class="reference internal" href="#pure-function">pure function</a></li>
<li><a class="reference internal" href="#higher-order">higher order</a></li>
<li><a class="reference internal" href="#lazy-vs-eager-evaluation">lazy vs eager evaluation</a></li>
<li><a class="reference internal" href="#immutability">immutability</a></li>
<li><a class="reference internal" href="#lambda">lambda</a></li>
<li><a class="reference internal" href="#map">map</a></li>
<li><a class="reference internal" href="#zip">zip</a><ul>
<li><a class="reference internal" href="#strict-mode">strict mode</a></li>
<li><a class="reference internal" href="#using">using *</a></li>
<li><a class="reference internal" href="#build-dict">build dict</a></li>
<li><a class="reference internal" href="#functional-pipelining">functional pipelining</a></li>
<li><a class="reference internal" href="#challenge">challenge</a></li>
</ul>
</li>
<li><a class="reference internal" href="#filter">filter</a><ul>
<li><a class="reference internal" href="#multiple-conditions">multiple conditions</a></li>
<li><a class="reference internal" href="#with-nested-lambdas">with nested lambdas</a></li>
<li><a class="reference internal" href="#chained-filtering">chained filtering</a></li>
<li><a class="reference internal" href="#exercise">exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-vs-comprehensions-gen-expression">map vs comprehensions &amp; gen expression</a></li>
<li><a class="reference internal" href="#any-all">any all</a><ul>
<li><a class="reference internal" href="#filter-and-map">filter and map</a></li>
<li><a class="reference internal" href="#negation">negation</a></li>
<li><a class="reference internal" href="#short-circuiting">short-circuiting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#comprehensions">comprehensions</a><ul>
<li><a class="reference internal" href="#multiple-iterables">multiple iterables</a></li>
<li><a class="reference internal" href="#id1">exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-comprehensions">set comprehensions</a><ul>
<li><a class="reference internal" href="#punctuation">punctuation</a></li>
<li><a class="reference internal" href="#primes">primes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dictionary-comprehensions">dictionary comprehensions</a><ul>
<li><a class="reference internal" href="#id2">exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iterator">iterator</a><ul>
<li><a class="reference internal" href="#iterator-protocol">iterator protocol</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generator">generator</a><ul>
<li><a class="reference internal" href="#generator-expressions">generator expressions</a></li>
<li><a class="reference internal" href="#way-communication">2-way communication</a></li>
<li><a class="reference internal" href="#id3">exercise</a></li>
<li><a class="reference internal" href="#data-pipelining">data pipelining</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recursion">recursion</a><ul>
<li><a class="reference internal" href="#recursion-trees-recurrence-relations">recursion trees &amp; recurrence relations</a></li>
<li><a class="reference internal" href="#tail-recursion-recursion-limits">tail recursion &amp; recursion limits</a></li>
<li><a class="reference internal" href="#mutual-recursion">mutual recursion</a></li>
<li><a class="reference internal" href="#parsing-structured-data">parsing structured data</a></li>
<li><a class="reference internal" href="#binary-search">binary search</a></li>
<li><a class="reference internal" href="#refactored-signature">refactored signature</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functools">functools</a><ul>
<li><a class="reference internal" href="#reduce">reduce</a></li>
<li><a class="reference internal" href="#wraps">wraps</a></li>
<li><a class="reference internal" href="#lru-cache">lru_cache</a></li>
</ul>
</li>
<li><a class="reference internal" href="#closures">closures</a><ul>
<li><a class="reference internal" href="#invoke-outside-scope">invoke outside scope</a></li>
<li><a class="reference internal" href="#using-lambdas">using lambdas</a></li>
</ul>
</li>
<li><a class="reference internal" href="#decorators">decorators</a><ul>
<li><a class="reference internal" href="#timer">timer</a></li>
<li><a class="reference internal" href="#backoff">backoff</a></li>
<li><a class="reference internal" href="#advanced-decorators">advanced decorators</a></li>
<li><a class="reference internal" href="#chaining-decorators">chaining decorators</a></li>
<li><a class="reference internal" href="#wraps-preserve-id">wraps, preserve id</a></li>
<li><a class="reference internal" href="#practice">practice</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fundamentals.html" title="fundamentals"
             >next</a> |</li>
        <li class="right" >
          <a href="file_ops.html" title="glob"
             >previous</a> |</li>
          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
              <a href="../index.html">PowrUsr Docs alpha documentation</a> &#187;
              
          </li>
          <li class="nav-item nav-item-1"><a href="index.html" >python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">functional programming</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; Copyright 2023, PowrUsr.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Last updated on 2024-01-05.
    
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>

  </body>
</html>